<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::DistributedWorker&lt; TargetT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">5.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1DistributedWorker.html">DistributedWorker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classstir_1_1DistributedWorker-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::DistributedWorker&lt; TargetT &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__recon__buildblock.html">Reconstruction building blocks</a> &raquo; <a class="el" href="group__distributable.html">distributable building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This implements the Worker for the <a class="el" href="group__distributable.html#ga080ce96edb2b4b7b628a226bcd7d2b20" title="This function essentially implements a loop over segments and all views in the current subset...">stir::distributable_computation()</a> function.  
 <a href="classstir_1_1DistributedWorker.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="DistributedWorker_8h_source.html">stir/recon_buildblock/DistributedWorker.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for stir::DistributedWorker&lt; TargetT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classstir_1_1DistributedWorker__inherit__graph.png" border="0" usemap="#stir_1_1DistributedWorker_3_01TargetT_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="stir_1_1DistributedWorker_3_01TargetT_01_4_inherit__map" id="stir_1_1DistributedWorker_3_01TargetT_01_4_inherit__map">
<area shape="rect" id="node2" href="classstir_1_1TimedObject.html" title="base class for all objects which need timers. At the moment, there&#39;s only a CPU timer. " alt="" coords="21,5,143,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac62d006c8b94b1caf72a6a40699b1d8f"><td class="memItemLeft" align="right" valign="top"><a id="ac62d006c8b94b1caf72a6a40699b1d8f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedWorker.html#ac62d006c8b94b1caf72a6a40699b1d8f">start</a> ()</td></tr>
<tr class="memdesc:ac62d006c8b94b1caf72a6a40699b1d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Infinite loop waiting for tasks from the master. <br /></td></tr>
<tr class="separator:ac62d006c8b94b1caf72a6a40699b1d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1TimedObject"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1TimedObject')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1TimedObject.html">stir::TimedObject</a></td></tr>
<tr class="memitem:a248ec6be3210f8cc2ac629827b8f22d0 inherit pub_methods_classstir_1_1TimedObject"><td class="memItemLeft" align="right" valign="top"><a id="a248ec6be3210f8cc2ac629827b8f22d0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1TimedObject.html#a248ec6be3210f8cc2ac629827b8f22d0">reset_timers</a> ()</td></tr>
<tr class="memdesc:a248ec6be3210f8cc2ac629827b8f22d0 inherit pub_methods_classstir_1_1TimedObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset all timers kept by this object <br /></td></tr>
<tr class="separator:a248ec6be3210f8cc2ac629827b8f22d0 inherit pub_methods_classstir_1_1TimedObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a18a40b2f1e1bb4132c1c5347cf12d inherit pub_methods_classstir_1_1TimedObject"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1TimedObject.html#a23a18a40b2f1e1bb4132c1c5347cf12d">stop_timers</a> () const</td></tr>
<tr class="memdesc:a23a18a40b2f1e1bb4132c1c5347cf12d inherit pub_methods_classstir_1_1TimedObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop all timers kept by this object  <a href="classstir_1_1TimedObject.html#a23a18a40b2f1e1bb4132c1c5347cf12d">More...</a><br /></td></tr>
<tr class="separator:a23a18a40b2f1e1bb4132c1c5347cf12d inherit pub_methods_classstir_1_1TimedObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4085959b7fca857cd90f8d1ab78400c9 inherit pub_methods_classstir_1_1TimedObject"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1TimedObject.html#a4085959b7fca857cd90f8d1ab78400c9">start_timers</a> (bool do_reset=false) const</td></tr>
<tr class="memdesc:a4085959b7fca857cd90f8d1ab78400c9 inherit pub_methods_classstir_1_1TimedObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">start all timers kept by this object  <a href="classstir_1_1TimedObject.html#a4085959b7fca857cd90f8d1ab78400c9">More...</a><br /></td></tr>
<tr class="separator:a4085959b7fca857cd90f8d1ab78400c9 inherit pub_methods_classstir_1_1TimedObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9f1ebea34cc8858ae8d12547ed849f inherit pub_methods_classstir_1_1TimedObject"><td class="memItemLeft" align="right" valign="top"><a id="a1e9f1ebea34cc8858ae8d12547ed849f"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1TimedObject.html#a1e9f1ebea34cc8858ae8d12547ed849f">get_CPU_timer_value</a> () const</td></tr>
<tr class="memdesc:a1e9f1ebea34cc8858ae8d12547ed849f inherit pub_methods_classstir_1_1TimedObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">get current value of the CPU timer (since first use or last reset) <br /></td></tr>
<tr class="separator:a1e9f1ebea34cc8858ae8d12547ed849f inherit pub_methods_classstir_1_1TimedObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b9924e874ce94ddba9068765794658 inherit pub_methods_classstir_1_1TimedObject"><td class="memItemLeft" align="right" valign="top"><a id="a39b9924e874ce94ddba9068765794658"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1TimedObject.html#a39b9924e874ce94ddba9068765794658">get_wall_clock_timer_value</a> () const</td></tr>
<tr class="memdesc:a39b9924e874ce94ddba9068765794658 inherit pub_methods_classstir_1_1TimedObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">get current value of the wall-clock timer (since first use or last reset) <br /></td></tr>
<tr class="separator:a39b9924e874ce94ddba9068765794658 inherit pub_methods_classstir_1_1TimedObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a61f0ac2bb42e29fa203c6f3af9b53dca"><td class="memItemLeft" align="right" valign="top"><a id="a61f0ac2bb42e29fa203c6f3af9b53dca"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedWorker.html#a61f0ac2bb42e29fa203c6f3af9b53dca">set_defaults</a> ()</td></tr>
<tr class="memdesc:a61f0ac2bb42e29fa203c6f3af9b53dca"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets defaults for this object <br /></td></tr>
<tr class="separator:a61f0ac2bb42e29fa203c6f3af9b53dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4af318a1184c98533560834597c688"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedWorker.html#a5a4af318a1184c98533560834597c688">setup_distributable_computation</a> ()</td></tr>
<tr class="memdesc:a5a4af318a1184c98533560834597c688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get basic information from the master.  <a href="#a5a4af318a1184c98533560834597c688">More...</a><br /></td></tr>
<tr class="separator:a5a4af318a1184c98533560834597c688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2585688b59d4e95d4a9c2aac6171d38e"><td class="memItemLeft" align="right" valign="top"><a id="a2585688b59d4e95d4a9c2aac6171d38e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedWorker.html#a2585688b59d4e95d4a9c2aac6171d38e">distributable_computation</a> (<a class="el" href="group__distributable.html#gadfab5b00692657d7beb222e61f3f5b34">RPC_process_related_viewgrams_type</a> *RPC_process_related_viewgrams)</td></tr>
<tr class="memdesc:a2585688b59d4e95d4a9c2aac6171d38e"><td class="mdescLeft">&#160;</td><td class="mdescRight">this does the actual computation corresponding to <a class="el" href="classstir_1_1DistributedWorker.html#a2585688b59d4e95d4a9c2aac6171d38e" title="this does the actual computation corresponding to distributable_computation() ">distributable_computation()</a> <br /></td></tr>
<tr class="separator:a2585688b59d4e95d4a9c2aac6171d38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class TargetT&gt;<br />
class stir::DistributedWorker&lt; TargetT &gt;</h3>

<p>This implements the Worker for the <a class="el" href="group__distributable.html#ga080ce96edb2b4b7b628a226bcd7d2b20" title="This function essentially implements a loop over segments and all views in the current subset...">stir::distributable_computation()</a> function. </p>
<p>The <a class="el" href="classstir_1_1DistributedWorker.html#ac62d006c8b94b1caf72a6a40699b1d8f" title="Infinite loop waiting for tasks from the master. ">start()</a> method is an infinite loop waiting for a task from the master. Very few tasks are implemented at the moment: set_up, compute, stop.</p>
<p>The <code><a class="el" href="classstir_1_1DistributedWorker.html#a2585688b59d4e95d4a9c2aac6171d38e" title="this does the actual computation corresponding to distributable_computation() ">distributable_computation()</a></code> function does the actual work. It is the slave-part of <a class="el" href="group__distributable.html#ga080ce96edb2b4b7b628a226bcd7d2b20" title="This function essentially implements a loop over segments and all views in the current subset...">stir::distributable_computation()</a> which runs on the master. It is a loop receiving the related viewgrams and calling an RPC_process_related_viewgrams_type function with the received values. When an end_iteration_notification is received, it calls the reduction of the output_image.</p>
<p>In each inner loop the worker first receives the vs_num and the information whether this is a new viewgram or a previously received viewgram. The latter case only emerges if distributed caching is enabled. If so, the worker does not have to receive the related viewgrams, but just gets it from its saved viewgrams.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000132">Todo:</a></b></dt><dd><p class="startdd">The log_likelihood_ptr argument to the RPC function is currently always NULL. </p>
<p class="enddd">Currently the only computation that is supported corresponds to the gradient computation. It would be trivial to add others. </p>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5a4af318a1184c98533560834597c688"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4af318a1184c98533560834597c688">&#9670;&nbsp;</a></span>setup_distributable_computation()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TargetT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstir_1_1DistributedWorker.html">stir::DistributedWorker</a>&lt; TargetT &gt;::setup_distributable_computation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get basic information from the master. </p>
<p>It sets up all needed objects by communicating with the master.</p>
<p>The following objects are set up:</p><ul>
<li>bool zero_seg0_end_planes</li>
<li>target_image_sptr</li>
<li><a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a> pointer</li>
<li><a class="el" href="classstir_1_1ProjectorByBinPair.html" title="Abstract base class for all projector pairs. ">ProjectorByBinPair</a> pointer</li>
<li><a class="el" href="classstir_1_1ProjDataInMemory.html" title="A class which reads/writes projection data from/to memory. ">ProjDataInMemory</a> to save the received related viewgrams</li>
</ul>
<p>Additionally some values for testing are set up. </p>

<p class="reference">References <a class="el" href="namespacedistributed.html#abf856c85a788952ab1fcfa9b8af8e2fc">distributed::receive_and_set_image_parameters()</a>, and <a class="el" href="namespacedistributed.html#aabc670c2c9984fbfeb8d98667618e73a">distributed::receive_bool_value()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/recon_buildblock/<a class="el" href="DistributedWorker_8h_source.html">DistributedWorker.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/recon_buildblock/<a class="el" href="DistributedWorker_8cxx.html">DistributedWorker.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 30 2023 05:43:43 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
