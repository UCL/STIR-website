<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::BinNormalisationPETFromComponents Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">6.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html">BinNormalisationPETFromComponents</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classstir_1_1BinNormalisationPETFromComponents-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::BinNormalisationPETFromComponents Class Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__recon__buildblock.html">Reconstruction building blocks</a> &raquo; <a class="el" href="group__normalisation.html">Normalisation building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="classstir_1_1BinNormalisation.html" title="Abstract base class for implementing bin-wise normalisation of data. ">BinNormalisation</a> class that uses component-based normalisation for PET.  
 <a href="classstir_1_1BinNormalisationPETFromComponents.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="BinNormalisationPETFromComponents_8h_source.html">stir/recon_buildblock/BinNormalisationPETFromComponents.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for stir::BinNormalisationPETFromComponents:</div>
<div class="dyncontent">
<div class="center"><img src="classstir_1_1BinNormalisationPETFromComponents__inherit__graph.png" border="0" usemap="#stir_1_1BinNormalisationPETFromComponents_inherit__map" alt="Inheritance graph"/></div>
<map name="stir_1_1BinNormalisationPETFromComponents_inherit__map" id="stir_1_1BinNormalisationPETFromComponents_inherit__map">
<area shape="rect" id="node2" href="classstir_1_1BinNormalisation.html" title="Abstract base class for implementing bin&#45;wise normalisation of data. " alt="" coords="33,276,180,303"/>
<area shape="rect" id="node3" href="classstir_1_1RegisteredObject.html" title="stir::RegisteredObject\l\&lt; BinNormalisation \&gt;" alt="" coords="32,185,181,227"/>
<area shape="rect" id="node4" href="classstir_1_1RegisteredObjectBase.html" title="Base class for all classes that can parse .par files (and more?)The only reason that this class exist..." alt="" coords="12,5,191,32"/>
<area shape="rect" id="node5" href="classstir_1_1RegisteredObject.html" title="Helper class to provide registry mechanisms to a Base classSuppose you have a hierarchy of classes wi..." alt="" coords="123,81,272,123"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a43b5ba22ca9aff40acd0d1ae88d6ebc3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a43b5ba22ca9aff40acd0d1ae88d6ebc3">get_registered_name</a> () const override</td></tr>
<tr class="memdesc:a43b5ba22ca9aff40acd0d1ae88d6ebc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name of the type of the object.  <a href="#a43b5ba22ca9aff40acd0d1ae88d6ebc3">More...</a><br /></td></tr>
<tr class="separator:a43b5ba22ca9aff40acd0d1ae88d6ebc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d0781223c2efa5e048905b60e10083"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a19d0781223c2efa5e048905b60e10083">BinNormalisationPETFromComponents</a> ()</td></tr>
<tr class="memdesc:a19d0781223c2efa5e048905b60e10083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a19d0781223c2efa5e048905b60e10083">More...</a><br /></td></tr>
<tr class="separator:a19d0781223c2efa5e048905b60e10083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0f4eea81283a1e60a4a3f9ff5c8221"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#ace0f4eea81283a1e60a4a3f9ff5c8221">is_trivial</a> () const override</td></tr>
<tr class="memdesc:ace0f4eea81283a1e60a4a3f9ff5c8221"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if we would be multiplying with 1 (i.e. do nothing)  <a href="#ace0f4eea81283a1e60a4a3f9ff5c8221">More...</a><br /></td></tr>
<tr class="separator:ace0f4eea81283a1e60a4a3f9ff5c8221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f3c7da1162229920e6675308948f8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a91f3c7da1162229920e6675308948f8f">set_up</a> (const shared_ptr&lt; const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt; &amp;exam_info_sptr, const shared_ptr&lt; const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt; &amp;) override</td></tr>
<tr class="memdesc:a91f3c7da1162229920e6675308948f8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if we can handle certain projection data.  <a href="#a91f3c7da1162229920e6675308948f8f">More...</a><br /></td></tr>
<tr class="separator:a91f3c7da1162229920e6675308948f8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bc04167c7743ea33ba5f864be5ee866"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a9bc04167c7743ea33ba5f864be5ee866">apply</a> (<a class="el" href="classstir_1_1RelatedViewgrams.html">RelatedViewgrams</a>&lt; float &gt; &amp;viewgrams) const override</td></tr>
<tr class="memdesc:a9bc04167c7743ea33ba5f864be5ee866"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalise some data.  <a href="#a9bc04167c7743ea33ba5f864be5ee866">More...</a><br /></td></tr>
<tr class="separator:a9bc04167c7743ea33ba5f864be5ee866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8dd681d3838c321ca8da1ac7d5382c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#af8dd681d3838c321ca8da1ac7d5382c5">undo</a> (<a class="el" href="classstir_1_1RelatedViewgrams.html">RelatedViewgrams</a>&lt; float &gt; &amp;viewgrams) const override</td></tr>
<tr class="memdesc:af8dd681d3838c321ca8da1ac7d5382c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Undo the normalisation of some data.  <a href="#af8dd681d3838c321ca8da1ac7d5382c5">More...</a><br /></td></tr>
<tr class="separator:af8dd681d3838c321ca8da1ac7d5382c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd350a24c4305bbe8a8dfee16340cb4"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#accd350a24c4305bbe8a8dfee16340cb4">get_bin_efficiency</a> (const <a class="el" href="classstir_1_1Bin.html">Bin</a> &amp;bin) const override</td></tr>
<tr class="memdesc:accd350a24c4305bbe8a8dfee16340cb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the 'efficiency' factor for a single bin.  <a href="#accd350a24c4305bbe8a8dfee16340cb4">More...</a><br /></td></tr>
<tr class="separator:accd350a24c4305bbe8a8dfee16340cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932ea8cbb36ab90bc082a10af5e9f041"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a932ea8cbb36ab90bc082a10af5e9f041">allocate</a> (shared_ptr&lt; const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt;, bool do_eff, bool do_geo, bool do_block=false, bool do_symmetry_per_block=false)</td></tr>
<tr class="memdesc:a932ea8cbb36ab90bc082a10af5e9f041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the relevant factors.  <a href="#a932ea8cbb36ab90bc082a10af5e9f041">More...</a><br /></td></tr>
<tr class="separator:a932ea8cbb36ab90bc082a10af5e9f041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4def8a8fa1fc3a1336878c93039147f"><td class="memItemLeft" align="right" valign="top"><a id="ab4def8a8fa1fc3a1336878c93039147f"></a>
<a class="el" href="classstir_1_1Array.html">DetectorEfficiencies</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>crystal_efficiencies</b> ()</td></tr>
<tr class="separator:ab4def8a8fa1fc3a1336878c93039147f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a2f54ab26586fa3dcfc235401d3e582"><td class="memItemLeft" align="right" valign="top"><a id="a8a2f54ab26586fa3dcfc235401d3e582"></a>
GeoData3D &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>geometric_factors</b> ()</td></tr>
<tr class="separator:a8a2f54ab26586fa3dcfc235401d3e582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af714b14df4fb7c6e43f0cd09f349189b"><td class="memItemLeft" align="right" valign="top"><a id="af714b14df4fb7c6e43f0cd09f349189b"></a>
BlockData3D &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>block_factors</b> ()</td></tr>
<tr class="separator:af714b14df4fb7c6e43f0cd09f349189b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc3617db98644717d1aafe21a6e5353e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#acc3617db98644717d1aafe21a6e5353e">set_defaults</a> () override</td></tr>
<tr class="memdesc:acc3617db98644717d1aafe21a6e5353e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets all factors to empty and flags that allocations need to be done.  <a href="#acc3617db98644717d1aafe21a6e5353e">More...</a><br /></td></tr>
<tr class="separator:acc3617db98644717d1aafe21a6e5353e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1BinNormalisation"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1BinNormalisation')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1BinNormalisation.html">stir::BinNormalisation</a></td></tr>
<tr class="memitem:a4dffd7704c1de53d2f094b45ad5f57d4 inherit pub_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="a4dffd7704c1de53d2f094b45ad5f57d4"></a>
virtual float&#160;</td><td class="memItemRight" valign="bottom"><b>get_calibration_factor</b> () const</td></tr>
<tr class="separator:a4dffd7704c1de53d2f094b45ad5f57d4 inherit pub_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f13a42b050313b4f5c1b982afb39cff inherit pub_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisation.html#a1f13a42b050313b4f5c1b982afb39cff">apply</a> (<a class="el" href="classstir_1_1ProjData.html">ProjData</a> &amp;, shared_ptr&lt; <a class="el" href="classstir_1_1DataSymmetriesForViewSegmentNumbers.html">DataSymmetriesForViewSegmentNumbers</a> &gt;=shared_ptr&lt; <a class="el" href="classstir_1_1DataSymmetriesForViewSegmentNumbers.html">DataSymmetriesForViewSegmentNumbers</a> &gt;()) const</td></tr>
<tr class="memdesc:a1f13a42b050313b4f5c1b982afb39cff inherit pub_methods_classstir_1_1BinNormalisation"><td class="mdescLeft">&#160;</td><td class="mdescRight">normalise some data  <a href="classstir_1_1BinNormalisation.html#a1f13a42b050313b4f5c1b982afb39cff">More...</a><br /></td></tr>
<tr class="separator:a1f13a42b050313b4f5c1b982afb39cff inherit pub_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade84708b3d2372e3adb25b3d73ec0a4a inherit pub_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisation.html#ade84708b3d2372e3adb25b3d73ec0a4a">undo</a> (<a class="el" href="classstir_1_1ProjData.html">ProjData</a> &amp;, shared_ptr&lt; <a class="el" href="classstir_1_1DataSymmetriesForViewSegmentNumbers.html">DataSymmetriesForViewSegmentNumbers</a> &gt;=shared_ptr&lt; <a class="el" href="classstir_1_1DataSymmetriesForViewSegmentNumbers.html">DataSymmetriesForViewSegmentNumbers</a> &gt;()) const</td></tr>
<tr class="memdesc:ade84708b3d2372e3adb25b3d73ec0a4a inherit pub_methods_classstir_1_1BinNormalisation"><td class="mdescLeft">&#160;</td><td class="mdescRight">undo the normalisation of some data  <a href="classstir_1_1BinNormalisation.html#ade84708b3d2372e3adb25b3d73ec0a4a">More...</a><br /></td></tr>
<tr class="separator:ade84708b3d2372e3adb25b3d73ec0a4a inherit pub_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab550f3d77744a0fd7a6cbc6aa50d293 inherit pub_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="aab550f3d77744a0fd7a6cbc6aa50d293"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_exam_info_sptr</b> (const shared_ptr&lt; const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt; _exam_info_sptr)</td></tr>
<tr class="separator:aab550f3d77744a0fd7a6cbc6aa50d293 inherit pub_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafbff53616f3b39ed7f4708b6590c6ca inherit pub_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="aafbff53616f3b39ed7f4708b6590c6ca"></a>
shared_ptr&lt; const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>get_exam_info_sptr</b> () const</td></tr>
<tr class="separator:aafbff53616f3b39ed7f4708b6590c6ca inherit pub_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:a15b8a585ba2b09674b823446bf8481bf inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a15b8a585ba2b09674b823446bf8481bf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ParsingObject</b> (const <a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;)</td></tr>
<tr class="separator:a15b8a585ba2b09674b823446bf8481bf inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20920a86db3428de6fd40381ef50aba4 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a20920a86db3428de6fd40381ef50aba4"></a>
<a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;)</td></tr>
<tr class="separator:a20920a86db3428de6fd40381ef50aba4 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268a7806a6ad7c78ec43f21582627163 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a268a7806a6ad7c78ec43f21582627163"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ask_parameters</b> ()</td></tr>
<tr class="separator:a268a7806a6ad7c78ec43f21582627163 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf7dc9a4725e6e6673b5cf36f8433a0b inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="acf7dc9a4725e6e6673b5cf36f8433a0b"></a>
virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><b>parameter_info</b> ()</td></tr>
<tr class="separator:acf7dc9a4725e6e6673b5cf36f8433a0b inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8597c63ee9c4e5c927117daf35f2b129 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a8597c63ee9c4e5c927117daf35f2b129"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>parse</b> (std::istream &amp;f)</td></tr>
<tr class="separator:a8597c63ee9c4e5c927117daf35f2b129 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc5f10739c1dfb78fecd33c74d7d643 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="aedc5f10739c1dfb78fecd33c74d7d643"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>parse</b> (const char *const filename)</td></tr>
<tr class="separator:aedc5f10739c1dfb78fecd33c74d7d643 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">checks if factors are initialised</div></td></tr>
<tr class="memitem:a664c628f4d6762530be04d6246bd5906"><td class="memItemLeft" align="right" valign="top"><a id="a664c628f4d6762530be04d6246bd5906"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_crystal_efficiencies</b> () const</td></tr>
<tr class="separator:a664c628f4d6762530be04d6246bd5906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83cb275b673303f9e51d937afefd00f4"><td class="memItemLeft" align="right" valign="top"><a id="a83cb275b673303f9e51d937afefd00f4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_geometric_factors</b> () const</td></tr>
<tr class="separator:a83cb275b673303f9e51d937afefd00f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f6e8c1159f1cc5c01067bfc49b4baf3"><td class="memItemLeft" align="right" valign="top"><a id="a2f6e8c1159f1cc5c01067bfc49b4baf3"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_block_factors</b> () const</td></tr>
<tr class="separator:a2f6e8c1159f1cc5c01067bfc49b4baf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classstir_1_1BinNormalisation"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstir_1_1BinNormalisation')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstir_1_1BinNormalisation.html">stir::BinNormalisation</a></td></tr>
<tr class="memitem:a5dd52d2f143582de1f2a6a73cc99ec9d inherit pro_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BinNormalisation.html#a5dd52d2f143582de1f2a6a73cc99ec9d">check</a> (const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &amp;proj_data_info) const</td></tr>
<tr class="memdesc:a5dd52d2f143582de1f2a6a73cc99ec9d inherit pro_methods_classstir_1_1BinNormalisation"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if the argument is the same as what was used for <a class="el" href="classstir_1_1BinNormalisation.html#aa03437ee6f211894a9e3275e93e46726" title="initialises the object and checks if it can handle such projection data ">set_up()</a>  <a href="classstir_1_1BinNormalisation.html#a5dd52d2f143582de1f2a6a73cc99ec9d">More...</a><br /></td></tr>
<tr class="separator:a5dd52d2f143582de1f2a6a73cc99ec9d inherit pro_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a798008439422bddf033f745913f30ecb inherit pro_methods_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="a798008439422bddf033f745913f30ecb"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>check</b> (const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &amp;exam_info) const</td></tr>
<tr class="separator:a798008439422bddf033f745913f30ecb inherit pro_methods_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:a6997d88d93e295e096a7c2eda925d4b6 inherit pro_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a6997d88d93e295e096a7c2eda925d4b6"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ParsingObject.html#a6997d88d93e295e096a7c2eda925d4b6">initialise_keymap</a> ()</td></tr>
<tr class="memdesc:a6997d88d93e295e096a7c2eda925d4b6 inherit pro_methods_classstir_1_1ParsingObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise all keywords. <br /></td></tr>
<tr class="separator:a6997d88d93e295e096a7c2eda925d4b6 inherit pro_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76911426e945844fe3429191db43af77 inherit pro_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ParsingObject.html#a76911426e945844fe3429191db43af77">post_processing</a> ()</td></tr>
<tr class="memdesc:a76911426e945844fe3429191db43af77 inherit pro_methods_classstir_1_1ParsingObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will be called at the end of the parsing.  <a href="classstir_1_1ParsingObject.html#a76911426e945844fe3429191db43af77">More...</a><br /></td></tr>
<tr class="separator:a76911426e945844fe3429191db43af77 inherit pro_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ParsingObject.html#ad8e81786834c010c96c31bce2bac3f6d">set_key_values</a> ()</td></tr>
<tr class="memdesc:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will be called before parsing or parameter_info is called.  <a href="classstir_1_1ParsingObject.html#ad8e81786834c010c96c31bce2bac3f6d">More...</a><br /></td></tr>
<tr class="separator:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae964200be7b37993fcc90cebdee433f4"><td class="memItemLeft" align="right" valign="top"><a id="ae964200be7b37993fcc90cebdee433f4"></a>
<a class="el" href="classstir_1_1Array.html">DetectorEfficiencies</a>&#160;</td><td class="memItemRight" valign="bottom"><b>efficiencies</b></td></tr>
<tr class="separator:ae964200be7b37993fcc90cebdee433f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05fa63766020f9895f9ed59a13280fc6"><td class="memItemLeft" align="right" valign="top"><a id="a05fa63766020f9895f9ed59a13280fc6"></a>
GeoData3D&#160;</td><td class="memItemRight" valign="bottom"><b>geo_data</b></td></tr>
<tr class="separator:a05fa63766020f9895f9ed59a13280fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc2c2964144af3631e75e4ef7292a97"><td class="memItemLeft" align="right" valign="top"><a id="a0fc2c2964144af3631e75e4ef7292a97"></a>
BlockData3D&#160;</td><td class="memItemRight" valign="bottom"><b>block_data</b></td></tr>
<tr class="separator:a0fc2c2964144af3631e75e4ef7292a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classstir_1_1BinNormalisation"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classstir_1_1BinNormalisation')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classstir_1_1BinNormalisation.html">stir::BinNormalisation</a></td></tr>
<tr class="memitem:ac0e328cd1db7c26d69e53d6144b10aee inherit pro_attribs_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="ac0e328cd1db7c26d69e53d6144b10aee"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>_already_set_up</b></td></tr>
<tr class="separator:ac0e328cd1db7c26d69e53d6144b10aee inherit pro_attribs_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043c5ac9353c4de0453458a3f5481cab inherit pro_attribs_classstir_1_1BinNormalisation"><td class="memItemLeft" align="right" valign="top"><a id="a043c5ac9353c4de0453458a3f5481cab"></a>
shared_ptr&lt; const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>proj_data_info_sptr</b></td></tr>
<tr class="separator:a043c5ac9353c4de0453458a3f5481cab inherit pro_attribs_classstir_1_1BinNormalisation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:ac53aef0f7ecd5dbb6204239b14e657f8 inherit pro_attribs_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="ac53aef0f7ecd5dbb6204239b14e657f8"></a>
<a class="el" href="classstir_1_1KeyParser.html">KeyParser</a>&#160;</td><td class="memItemRight" valign="bottom"><b>parser</b></td></tr>
<tr class="separator:ac53aef0f7ecd5dbb6204239b14e657f8 inherit pro_attribs_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; BinNormalisation &gt;</a></td></tr>
<tr class="memitem:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1BinNormalisation.html">BinNormalisation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#aa32357a52b98c87a1c38a162355c874e">read_registered_object</a> (std::istream *in, const std::string &amp;registered_name)</td></tr>
<tr class="memdesc:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new object (of a type derived from Root, its actual type determined by the registered_name parameter) by parsing the istream.  <a href="classstir_1_1RegisteredObject.html#aa32357a52b98c87a1c38a162355c874e">More...</a><br /></td></tr>
<tr class="separator:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1BinNormalisation.html">BinNormalisation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a20ba04aadc52e375e5e97961ddb8f5e1">ask_type_and_parameters</a> ()</td></tr>
<tr class="memdesc:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">ask the user for the type, and then calls read_registered_object(0, type)  <a href="classstir_1_1RegisteredObject.html#a20ba04aadc52e375e5e97961ddb8f5e1">More...</a><br /></td></tr>
<tr class="separator:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a7946572a60fac083300e2baaf650d6b8">list_registered_names</a> (std::ostream &amp;stream)</td></tr>
<tr class="memdesc:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all possible registered names to the stream.  <a href="classstir_1_1RegisteredObject.html#a7946572a60fac083300e2baaf650d6b8">More...</a><br /></td></tr>
<tr class="separator:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_types_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pro_types_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Protected Types inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; BinNormalisation &gt;</a></td></tr>
<tr class="memitem:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top"><a id="a4497941e1fe3ec79b7a75085d75488fb"></a>
typedef <a class="el" href="classstir_1_1BinNormalisation.html">BinNormalisation</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a4497941e1fe3ec79b7a75085d75488fb">RootFactory</a>) (std::istream *)</td></tr>
<tr class="memdesc:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of a root factory is a function, taking an istream* as argument, and returning a Root*. <br /></td></tr>
<tr class="separator:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top"><a id="aa6dc41fd8a2cb0a5e1118aa32df98711"></a>
typedef <a class="el" href="classstir_1_1FactoryRegistry.html">FactoryRegistry</a>&lt; std::string, <a class="el" href="classstir_1_1RegisteredObject.html#a4497941e1fe3ec79b7a75085d75488fb">RootFactory</a>, <a class="el" href="structstir_1_1interfile__less.html">interfile_less</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#aa6dc41fd8a2cb0a5e1118aa32df98711">RegistryType</a></td></tr>
<tr class="memdesc:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the registry. <br /></td></tr>
<tr class="separator:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; BinNormalisation &gt;</a></td></tr>
<tr class="memitem:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1RegisteredObject.html#aa6dc41fd8a2cb0a5e1118aa32df98711">RegistryType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a480c831d74fb41ff32787a908a07bbd3">registry</a> ()</td></tr>
<tr class="memdesc:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static function returning the registry.  <a href="classstir_1_1RegisteredObject.html#a480c831d74fb41ff32787a908a07bbd3">More...</a><br /></td></tr>
<tr class="separator:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classstir_1_1BinNormalisation.html" title="Abstract base class for implementing bin-wise normalisation of data. ">BinNormalisation</a> class that uses component-based normalisation for PET. </p>
<p>Components currently supported are crystal efficiencies, geometric factors (constrained by symmetry) and block data. The latter were introduced to cope with timing alignment issues between blocks, but are generally not recommended in the current estimation process (by ML_estimate_component_based_normalisation) as the model allows for too much freedom.</p>
<p>The detection efficiency of a crystal pair is modelled as </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \epsilon_i \epsilon_j g_{ij} B_{ij} \]" src="form_58.png"/>
</p>
<p> with <img class="formulaInl" alt="$ i,j $" src="form_59.png"/> crystal indices, and <img class="formulaInl" alt="$ g_{ij} $" src="form_60.png"/> obtained from a GeoData3D object by using symmetries, and <img class="formulaInl" alt="$ B_{ij} $" src="form_61.png"/> from a BlockData3D object by finding which blocks the crystals belong to.</p>
<p>Symmetries for the geometric factors are described in <br />
 Niknejad, T., Tavernier, S., Varela, J. and Thielemans, K. <em>Validation of 3D model-based maximum-likelihood estimation of normalisation factors for partial ring positron emission tomography</em>. in 2016 IEEE Nuclear Science Symposium, Medical Imaging Conference and Room-Temperature Semiconductor Detector Workshop (NSS/MIC/RTSD) 1-5 (2016). doi:10.1109/NSSMIC.2016.8069577. <br />
 Note however that this describes rotational/translational symmetry per block, while the default is now to use symmetries per bucket ( see the <code>do_symmetry_per_block</code> argument of <a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a932ea8cbb36ab90bc082a10af5e9f041" title="Allocate the relevant factors. ">allocate()</a>). (The block factors still work per block, not bucket).</p>
<p>This class does not actually set the relevant factors. That is left to external methods via the crystal_efficiencies(), geometric_factors() and block_factors() members. If they are not set, the factor is not applied (i.e. assumed to be 1).</p>
<p>The model is constructed for the "physical" crystals only. The "virtual" crystals are forced to have 0 detection efficiency.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000127">Todo:</a></b></dt><dd><p class="startdd">This class should probably be derived from <a class="el" href="classstir_1_1BinNormalisationWithCalibration.html">BinNormalisationWithCalibration</a>. </p>
<p class="enddd">The class currently does not handle "compressed" projection data (i.e. span etc).</p>
</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000128">Todo:</a></b></dt><dd>Currently, <a class="el" href="classstir_1_1BinNormalisationPETFromComponents.html#a91f3c7da1162229920e6675308948f8f" title="Checks if we can handle certain projection data. ">set_up()</a> creates a <a class="el" href="classstir_1_1ProjDataInMemory.html" title="A class which reads/writes projection data from/to memory. ">ProjDataInMemory</a> object with the PET detection efficiencies. This uses a lot of memory unfortunately.</dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a19d0781223c2efa5e048905b60e10083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d0781223c2efa5e048905b60e10083">&#9670;&nbsp;</a></span>BinNormalisationPETFromComponents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">stir::BinNormalisationPETFromComponents::BinNormalisationPETFromComponents </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<dl class="section warning"><dt>Warning</dt><dd>You should not call any member functions for any object just constructed with this constructor. Initialise the object properly first. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a43b5ba22ca9aff40acd0d1ae88d6ebc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b5ba22ca9aff40acd0d1ae88d6ebc3">&#9670;&nbsp;</a></span>get_registered_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string stir::BinNormalisationPETFromComponents::get_registered_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the name of the type of the object. </p>
<p>Each type that can be parsed has a unique (within its hierarchy) name associated with it. This function returns that name. <a class="el" href="classstir_1_1KeyParser.html#a4e5b0bca8a73d015c9fef5dbe6aebb71" title="Returns a string with keywords and their values. ">KeyParser::parameter_info()</a> needs to know this name such that it can fill it in. </p>

<p>Implements <a class="el" href="classstir_1_1RegisteredObjectBase.html#a9eb7d6e93407316c0780e2121e522ae4">stir::RegisteredObjectBase</a>.</p>

</div>
</div>
<a id="ace0f4eea81283a1e60a4a3f9ff5c8221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0f4eea81283a1e60a4a3f9ff5c8221">&#9670;&nbsp;</a></span>is_trivial()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool stir::BinNormalisationPETFromComponents::is_trivial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>check if we would be multiplying with 1 (i.e. do nothing) </p>
<p>Checks if all data is equal to 1 (up to a tolerance of 1e-4). To do this, it checks if all components are 1. </p>

<p>Reimplemented from <a class="el" href="classstir_1_1BinNormalisation.html#aebe407aa214715b152f50222a6a57998">stir::BinNormalisation</a>.</p>

<p class="reference">References <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f">stir::error()</a>.</p>

</div>
</div>
<a id="a91f3c7da1162229920e6675308948f8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f3c7da1162229920e6675308948f8f">&#9670;&nbsp;</a></span>set_up()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a> stir::BinNormalisationPETFromComponents::set_up </td>
          <td>(</td>
          <td class="paramtype">const shared_ptr&lt; const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>exam_info_sptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const shared_ptr&lt; const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>check_proj_data_info_sptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if we can handle certain projection data. </p>
<p>Compares the stored <a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a> with the <a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a> supplied. </p>

<p>Reimplemented from <a class="el" href="classstir_1_1BinNormalisation.html#aa03437ee6f211894a9e3275e93e46726">stir::BinNormalisation</a>.</p>

<p class="reference">References <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f">stir::error()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a6f96709c581f8800521ceb9e7bbe3cb0">stir::ProjDataInfo::get_max_axial_pos_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#af84cfb2229160862c25a86e66955e744">stir::ProjDataInfo::get_max_segment_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a649f9d722765ee211751d9441e839489">stir::ProjDataInfo::get_max_tangential_pos_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a2cde055a364af39ac7a99cc9b283ba1a">stir::ProjDataInfo::get_min_axial_pos_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a721c0d148c70dcbd4f150a9d2804051f">stir::ProjDataInfo::get_min_segment_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a2dd57dfe721004c9e049191863549d05">stir::ProjDataInfo::get_min_tangential_pos_num()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a0082cb29815df1b8d7769072817f48f5">stir::ProjDataInfo::parameter_info()</a>, and <a class="el" href="group__buildblock.html#ga45e27d9de6cdc69c146e791a825a20da">stir::warning()</a>.</p>

</div>
</div>
<a id="a9bc04167c7743ea33ba5f864be5ee866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bc04167c7743ea33ba5f864be5ee866">&#9670;&nbsp;</a></span>apply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::BinNormalisationPETFromComponents::apply </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstir_1_1RelatedViewgrams.html">RelatedViewgrams</a>&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>viewgrams</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Normalise some data. </p>
<p>This means <code>divide</code> with the efficiency model. 0/0 is set to 0. </p>

<p>Reimplemented from <a class="el" href="classstir_1_1BinNormalisation.html#ade94dfa4d98305304bba261f675b2058">stir::BinNormalisation</a>.</p>

<p class="reference">References <a class="el" href="classstir_1_1RelatedViewgrams.html#a52deff054b019817dc4a8db2abcf9b46">stir::RelatedViewgrams&lt; elemT &gt;::begin()</a>, <a class="el" href="group__numerics.html#ga2135eeda219aa6700b50580389a12771">stir::divide()</a>, <a class="el" href="classstir_1_1RelatedViewgrams.html#a042cde517164474e9f94f3846c24d1e9">stir::RelatedViewgrams&lt; elemT &gt;::end()</a>, <a class="el" href="classstir_1_1RelatedViewgrams.html#ab22ec8a45e3b9064264e9ad6306eba69">stir::RelatedViewgrams&lt; elemT &gt;::get_basic_view_segment_num()</a>, <a class="el" href="classstir_1_1RelatedViewgrams.html#ab3e880a7d9379ad5e203baaf017f57e1">stir::RelatedViewgrams&lt; elemT &gt;::get_proj_data_info_sptr()</a>, and <a class="el" href="classstir_1_1RelatedViewgrams.html#acb96a60695d1fe2f33b03e3365447666">stir::RelatedViewgrams&lt; elemT &gt;::get_symmetries_ptr()</a>.</p>

</div>
</div>
<a id="af8dd681d3838c321ca8da1ac7d5382c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8dd681d3838c321ca8da1ac7d5382c5">&#9670;&nbsp;</a></span>undo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::BinNormalisationPETFromComponents::undo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstir_1_1RelatedViewgrams.html">RelatedViewgrams</a>&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>viewgrams</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Undo the normalisation of some data. </p>
<p>This means <code>multiply</code> with the efficiency model. </p>

<p>Reimplemented from <a class="el" href="classstir_1_1BinNormalisation.html#ac8f4b1217b33a825138e0928d4a447dd">stir::BinNormalisation</a>.</p>

<p class="reference">References <a class="el" href="classstir_1_1RelatedViewgrams.html#ab22ec8a45e3b9064264e9ad6306eba69">stir::RelatedViewgrams&lt; elemT &gt;::get_basic_view_segment_num()</a>, <a class="el" href="classstir_1_1RelatedViewgrams.html#ab3e880a7d9379ad5e203baaf017f57e1">stir::RelatedViewgrams&lt; elemT &gt;::get_proj_data_info_sptr()</a>, and <a class="el" href="classstir_1_1RelatedViewgrams.html#acb96a60695d1fe2f33b03e3365447666">stir::RelatedViewgrams&lt; elemT &gt;::get_symmetries_ptr()</a>.</p>

</div>
</div>
<a id="accd350a24c4305bbe8a8dfee16340cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accd350a24c4305bbe8a8dfee16340cb4">&#9670;&nbsp;</a></span>get_bin_efficiency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float stir::BinNormalisationPETFromComponents::get_bin_efficiency </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstir_1_1Bin.html">Bin</a> &amp;&#160;</td>
          <td class="paramname"><em>bin</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the 'efficiency' factor for a single bin. </p>
<p>With the notation of the class documentation, this returns the factor <img class="formulaInl" alt="$\mathrm{norm}_b $" src="form_57.png"/>.</p>
<dl class="section warning"><dt>Warning</dt><dd>Some derived classes might implement this very inefficiently. </dd></dl>

<p>Implements <a class="el" href="classstir_1_1BinNormalisation.html#adce7601a8ce295d6bc107e0ccea72657">stir::BinNormalisation</a>.</p>

</div>
</div>
<a id="a932ea8cbb36ab90bc082a10af5e9f041"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932ea8cbb36ab90bc082a10af5e9f041">&#9670;&nbsp;</a></span>allocate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stir::BinNormalisationPETFromComponents::allocate </td>
          <td>(</td>
          <td class="paramtype">shared_ptr&lt; const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>pdi_sptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_eff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_geo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_block</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>do_symmetry_per_block</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate the relevant factors. </p>
<p>They are currently probably set to 0, but do not rely on this. </p>

</div>
</div>
<a id="acc3617db98644717d1aafe21a6e5353e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc3617db98644717d1aafe21a6e5353e">&#9670;&nbsp;</a></span>set_defaults()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::BinNormalisationPETFromComponents::set_defaults </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets all factors to empty and flags that allocations need to be done. </p>
<p>Also calls <a class="el" href="classstir_1_1BinNormalisation.html#a762baf65f0986d1b418cbf43f7481edb">base_type::set_defaults()</a> </p>

<p>Reimplemented from <a class="el" href="classstir_1_1BinNormalisation.html#a762baf65f0986d1b418cbf43f7481edb">stir::BinNormalisation</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/recon_buildblock/<a class="el" href="BinNormalisationPETFromComponents_8h_source.html">BinNormalisationPETFromComponents.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/recon_buildblock/<a class="el" href="BinNormalisationPETFromComponents_8cxx.html">BinNormalisationPETFromComponents.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 7 2024 08:24:37 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
