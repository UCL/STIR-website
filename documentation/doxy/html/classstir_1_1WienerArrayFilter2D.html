<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::WienerArrayFilter2D&lt; elemT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">6.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1WienerArrayFilter2D.html">WienerArrayFilter2D</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classstir_1_1WienerArrayFilter2D-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::WienerArrayFilter2D&lt; elemT &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__buildblock.html">Basic building blocks</a> &raquo; <a class="el" href="group__Array.html">Items relating to vectors and (multi-dimensional) arrays</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Applies a 2D Wiener filter on a 3D input array, slice by slice.  
 <a href="classstir_1_1WienerArrayFilter2D.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="WienerArrayFilter2D_8h_source.html">stir/WienerArrayFilter2D.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for stir::WienerArrayFilter2D&lt; elemT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classstir_1_1WienerArrayFilter2D__inherit__graph.png" border="0" usemap="#stir_1_1WienerArrayFilter2D_3_01elemT_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="stir_1_1WienerArrayFilter2D_3_01elemT_01_4_inherit__map" id="stir_1_1WienerArrayFilter2D_3_01elemT_01_4_inherit__map">
<area shape="rect" id="node2" href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html" title="stir::ArrayFunctionObject\l_2ArgumentImplementation\l\&lt; 3, elemT \&gt;" alt="" coords="559,5,740,61"/>
<area shape="rect" id="node3" href="classstir_1_1ArrayFunctionObject.html" title="A class for operations on n&#45;dimensional Arrays. " alt="" coords="5,21,193,62"/>
<area shape="rect" id="node4" href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html" title="A convenience class for children of ArrayFunctionObject. It implements the in&#45;place operator() in ter..." alt="" coords="243,45,431,101"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1af6439bf05b66640674be55f9a45a48"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1WienerArrayFilter2D.html#a1af6439bf05b66640674be55f9a45a48">is_trivial</a> () const override</td></tr>
<tr class="memdesc:a1af6439bf05b66640674be55f9a45a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should return true when the operations won't modify the object at all.  <a href="#a1af6439bf05b66640674be55f9a45a48">More...</a><br /></td></tr>
<tr class="separator:a1af6439bf05b66640674be55f9a45a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html">stir::ArrayFunctionObject_2ArgumentImplementation&lt; 3, elemT &gt;</a></td></tr>
<tr class="memitem:a2ab801e623cfebe71f4d930ee9c47fb1 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memItemLeft" align="right" valign="top"><a id="a2ab801e623cfebe71f4d930ee9c47fb1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html#a2ab801e623cfebe71f4d930ee9c47fb1">operator()</a> (<a class="el" href="classstir_1_1Array.html">Array</a>&lt; num_dimensions, elemT &gt; &amp;array) const override</td></tr>
<tr class="memdesc:a2ab801e623cfebe71f4d930ee9c47fb1 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="mdescLeft">&#160;</td><td class="mdescRight">in-place modification of array, implemented inline <br /></td></tr>
<tr class="separator:a2ab801e623cfebe71f4d930ee9c47fb1 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4cdc0127de9a9868319a4226b7ba133 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><b>operator()</b> (<a class="el" href="classstir_1_1Array.html">Array</a>&lt; num_dimensions, elemT &gt; &amp;out_array, const <a class="el" href="classstir_1_1Array.html">Array</a>&lt; num_dimensions, elemT &gt; &amp;in_array) const override</td></tr>
<tr class="memdesc:ac4cdc0127de9a9868319a4226b7ba133 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="mdescLeft">&#160;</td><td class="mdescRight">result stored in another array  <a href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html#ac4cdc0127de9a9868319a4226b7ba133">More...</a><br /></td></tr>
<tr class="separator:ac4cdc0127de9a9868319a4226b7ba133 inherit pub_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1ArrayFunctionObject"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1ArrayFunctionObject')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1ArrayFunctionObject.html">stir::ArrayFunctionObject&lt; num_dimensions, elemT &gt;</a></td></tr>
<tr class="memitem:a8d35e1583eab54a358710bb0abf5b833 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ArrayFunctionObject.html#a8d35e1583eab54a358710bb0abf5b833">get_influencing_indices</a> (<a class="el" href="classstir_1_1IndexRange.html">IndexRange</a>&lt; num_dimensions &gt; &amp;influencing_indices, const <a class="el" href="classstir_1_1IndexRange.html">IndexRange</a>&lt; num_dimensions &gt; &amp;output_indices) const</td></tr>
<tr class="memdesc:a8d35e1583eab54a358710bb0abf5b833 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the range of indices that influences the result in a set of coordinates <em>output_indices</em>  <a href="classstir_1_1ArrayFunctionObject.html#a8d35e1583eab54a358710bb0abf5b833">More...</a><br /></td></tr>
<tr class="separator:a8d35e1583eab54a358710bb0abf5b833 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b83130615e33a36ca4ff62cecc883f3 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ArrayFunctionObject.html#a0b83130615e33a36ca4ff62cecc883f3">get_influenced_indices</a> (<a class="el" href="classstir_1_1IndexRange.html">IndexRange</a>&lt; num_dimensions &gt; &amp;influenced_indices, const <a class="el" href="classstir_1_1IndexRange.html">IndexRange</a>&lt; num_dimensions &gt; &amp;input_indices) const</td></tr>
<tr class="memdesc:a0b83130615e33a36ca4ff62cecc883f3 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the range of indices that gets influenced by a set of coordinate <em>input_indices</em>  <a href="classstir_1_1ArrayFunctionObject.html#a0b83130615e33a36ca4ff62cecc883f3">More...</a><br /></td></tr>
<tr class="separator:a0b83130615e33a36ca4ff62cecc883f3 inherit pub_methods_classstir_1_1ArrayFunctionObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstir_1_1ArrayFunctionObject__2ArgumentImplementation.html">stir::ArrayFunctionObject_2ArgumentImplementation&lt; 3, elemT &gt;</a></td></tr>
<tr class="memitem:adcdb30f99619c0cf984b29278b8b173b inherit pro_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memItemLeft" align="right" valign="top"><a id="adcdb30f99619c0cf984b29278b8b173b"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>do_it</b> (<a class="el" href="classstir_1_1Array.html">Array</a>&lt; num_dimensions, elemT &gt; &amp;out_array, const <a class="el" href="classstir_1_1Array.html">Array</a>&lt; num_dimensions, elemT &gt; &amp;in_array) const=0</td></tr>
<tr class="separator:adcdb30f99619c0cf984b29278b8b173b inherit pro_methods_classstir_1_1ArrayFunctionObject__2ArgumentImplementation"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename elemT&gt;<br />
class stir::WienerArrayFilter2D&lt; elemT &gt;</h3>

<p>Applies a 2D Wiener filter on a 3D input array, slice by slice. </p>
<p>This function applies a Wiener filter on each 2D slice of a 3D volume independently, using a fixed 3x3 window. For each pixel in the slice, the filter estimates the local mean and variance, and uses these values, along with the noise variance estimated from the entire slice, to reduce noise while preserving details. The filtered output is stored in the <code>out_array</code>.</p>
<p>The formula used for the Wiener filter is: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \text{output}(i, j) = \left(\frac{\text{input}(i, j) - \text{localMean}(i, j)}{\max(\text{localVar}(i, j), \text{noise})}\right) \cdot \max(\text{localVar}(i, j) - \text{noise}, 0) + \text{localMean}(i, j) \]" src="form_160.png"/>
</p>
<ul>
<li><code>localMean[i][j]</code> is the mean of the 3x3 neighborhood around pixel <code>(i, j)</code>.</li>
<li><code>localVar[i][j]</code> is the variance of the 3x3 neighborhood around pixel <code>(i, j)</code>.</li>
<li><code>noise</code> is the average noise variance estimated over the entire slice.</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>The edges of each 2D slice are not processed, as the filter does not have sufficient neighboring pixels for the 3x3 window.</dd></dl>
<h3>Wiener Filter Configuration</h3>
<p>This filter is fully automated and does not require any parameters. To enable it in the reconstruction process, include the following in the parameter file: </p><div class="fragment"><div class="line">post-filter type := Wiener</div><div class="line">Wiener Filter Parameters :=</div><div class="line">End Wiener Filter Parameters :=</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This filter operates on each axial slice independently, and does not take into account neighboring slices. It is effectively a 2D filter applied slice-by-slice on a 3D volume. </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1af6439bf05b66640674be55f9a45a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1af6439bf05b66640674be55f9a45a48">&#9670;&nbsp;</a></span>is_trivial()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename elemT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classstir_1_1WienerArrayFilter2D.html">stir::WienerArrayFilter2D</a>&lt; elemT &gt;::is_trivial </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should return true when the operations won't modify the object at all. </p>
<p>For the 2 argument version, elements in <em>out_array</em> will be set to corresponding elements in <em>in_array</em>. Elements in <em>out_array</em> that do not occur in <em>in_array</em> will be set to 0. </p>

<p>Implements <a class="el" href="classstir_1_1ArrayFunctionObject.html#a6070648c9ecce42d7fd223bd63590c81">stir::ArrayFunctionObject&lt; num_dimensions, elemT &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/<a class="el" href="WienerArrayFilter2D_8h_source.html">WienerArrayFilter2D.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/buildblock/<a class="el" href="WienerArrayFilter2D_8cxx.html">WienerArrayFilter2D.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 31 2025 13:54:52 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
