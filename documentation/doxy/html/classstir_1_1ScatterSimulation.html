<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::ScatterSimulation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">4.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1ScatterSimulation.html">ScatterSimulation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classstir_1_1ScatterSimulation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::ScatterSimulation Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span><div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__scatter.html">Scatter estimation building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Simulate the scatter probability using a model-based approach.  
 <a href="classstir_1_1ScatterSimulation.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="ScatterSimulation_8h_source.html">stir/scatter/ScatterSimulation.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for stir::ScatterSimulation:</div>
<div class="dyncontent">
<div class="center"><img src="classstir_1_1ScatterSimulation__inherit__graph.png" border="0" usemap="#stir_1_1ScatterSimulation_inherit__map" alt="Inheritance graph"/></div>
<map name="stir_1_1ScatterSimulation_inherit__map" id="stir_1_1ScatterSimulation_inherit__map">
<area shape="rect" id="node6" href="classstir_1_1RegisteredParsingObject.html" title="stir::RegisteredParsingObject\l\&lt; SingleScatterSimulation,\l ScatterSimulation, ScatterSimulation \&gt;" alt="" coords="1233,5,1515,61"/>
<area shape="rect" id="node2" href="classstir_1_1RegisteredObject.html" title="stir::RegisteredObject\l\&lt; ScatterSimulation \&gt;" alt="" coords="800,13,968,54"/>
<area shape="rect" id="node3" href="classstir_1_1RegisteredObjectBase.html" title="Base class for all classes that can parse .par files (and more?)The only reason that this class exist..." alt="" coords="195,20,389,47"/>
<area shape="rect" id="node5" href="classstir_1_1RegisteredObject.html" title="Helper class to provide registry mechanisms to a Base classSuppose you have a hierarchy of classes wi..." alt="" coords="439,42,601,83"/>
<area shape="rect" id="node4" href="classstir_1_1ParsingObject.html" title="A base class for objects that want to be able to parse parameter files. " alt="" coords="5,20,145,47"/>
<area shape="rect" id="node7" href="classstir_1_1SingleScatterSimulation.html" title="PET single scatter simulation. " alt="" coords="1564,20,1771,47"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2059a15fb5947c1f5ba12ffc98509a94"><td class="memItemLeft" align="right" valign="top"><a id="a2059a15fb5947c1f5ba12ffc98509a94"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a2059a15fb5947c1f5ba12ffc98509a94">ScatterSimulation</a> ()</td></tr>
<tr class="memdesc:a2059a15fb5947c1f5ba12ffc98509a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:a2059a15fb5947c1f5ba12ffc98509a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9efb85dc674d4a2eaa2a74e72804d427"><td class="memItemLeft" align="right" valign="top"><a id="a9efb85dc674d4a2eaa2a74e72804d427"></a>
virtual <a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><b>process_data</b> ()</td></tr>
<tr class="separator:a9efb85dc674d4a2eaa2a74e72804d427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a055c0b889a1f7941637fbaa25c8bfa91"><td class="memItemLeft" align="right" valign="top"><a id="a055c0b889a1f7941637fbaa25c8bfa91"></a>
virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a055c0b889a1f7941637fbaa25c8bfa91">method_info</a> () const =0</td></tr>
<tr class="memdesc:a055c0b889a1f7941637fbaa25c8bfa91"><td class="mdescLeft">&#160;</td><td class="mdescRight">gives method information <br /></td></tr>
<tr class="separator:a055c0b889a1f7941637fbaa25c8bfa91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae51090d355860be4f99c7e3534122057"><td class="memItemLeft" align="right" valign="top"><a id="ae51090d355860be4f99c7e3534122057"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ae51090d355860be4f99c7e3534122057">ask_parameters</a> ()</td></tr>
<tr class="memdesc:ae51090d355860be4f99c7e3534122057"><td class="mdescLeft">&#160;</td><td class="mdescRight">prompts the user to enter parameter values manually <br /></td></tr>
<tr class="separator:ae51090d355860be4f99c7e3534122057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbf4a6cf110457b11050379d492788df"><td class="memItemLeft" align="right" valign="top"><a id="abbf4a6cf110457b11050379d492788df"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#abbf4a6cf110457b11050379d492788df">downsample_density_image_for_scatter_points</a> (float _zoom_xy, float _zoom_z, int _size_xy=-1, int _size_z=-1)</td></tr>
<tr class="memdesc:abbf4a6cf110457b11050379d492788df"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is a less powerfull tool than directly zooming the image. However it will check that the downsampling is done in manner compatible with the <a class="el" href="classstir_1_1ScatterSimulation.html" title="Simulate the scatter probability using a model-based approach. ">ScatterSimulation</a>. <br /></td></tr>
<tr class="separator:abbf4a6cf110457b11050379d492788df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac130313dcb61901a619e6397fcd375cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ac130313dcb61901a619e6397fcd375cc">downsample_scanner</a> (int new_num_rings=-1, int new_num_dets=-1)</td></tr>
<tr class="memdesc:ac130313dcb61901a619e6397fcd375cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downsample the scanner keeping the total axial length the same.  <a href="#ac130313dcb61901a619e6397fcd375cc">More...</a><br /></td></tr>
<tr class="separator:ac130313dcb61901a619e6397fcd375cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f90bebcb4fd07bc484c0876c7575d8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a2f90bebcb4fd07bc484c0876c7575d8f">downsample_images_to_scanner_size</a> ()</td></tr>
<tr class="memdesc:a2f90bebcb4fd07bc484c0876c7575d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Downsamples activity and attenuation images to voxel sizes appropriate for the (downsampled) scanner.  <a href="#a2f90bebcb4fd07bc484c0876c7575d8f">More...</a><br /></td></tr>
<tr class="separator:a2f90bebcb4fd07bc484c0876c7575d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8c82e7557ea44b70c15300f29043dd"><td class="memItemLeft" align="right" valign="top"><a id="ada8c82e7557ea44b70c15300f29043dd"></a>
virtual <a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><b>set_up</b> ()</td></tr>
<tr class="separator:ada8c82e7557ea44b70c15300f29043dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5211a9c866839287500b96aae6d5edf8"><td class="memItemLeft" align="right" valign="top"><a id="a5211a9c866839287500b96aae6d5edf8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a5211a9c866839287500b96aae6d5edf8">write_log</a> (const double simulation_time, const float total_scatter)</td></tr>
<tr class="memdesc:a5211a9c866839287500b96aae6d5edf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output the log of the process. <br /></td></tr>
<tr class="separator:a5211a9c866839287500b96aae6d5edf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">check functions</div></td></tr>
<tr class="memitem:a003e482515724826a9dade319390a4e8"><td class="memItemLeft" align="right" valign="top"><a id="a003e482515724826a9dade319390a4e8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>has_template_proj_data_info</b> () const</td></tr>
<tr class="separator:a003e482515724826a9dade319390a4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04d0f350c13d1a53ee5cc7e4220e72ec"><td class="memItemLeft" align="right" valign="top"><a id="a04d0f350c13d1a53ee5cc7e4220e72ec"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a04d0f350c13d1a53ee5cc7e4220e72ec">has_exam_info</a> () const</td></tr>
<tr class="memdesc:a04d0f350c13d1a53ee5cc7e4220e72ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if template_exam_info_sptr has been set. <br /></td></tr>
<tr class="separator:a04d0f350c13d1a53ee5cc7e4220e72ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">get functions</div></td></tr>
<tr class="memitem:ac2697168d778f0da07da17edbe0c823c"><td class="memItemLeft" align="right" valign="top"><a id="ac2697168d778f0da07da17edbe0c823c"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1ProjData.html">ProjData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>get_output_proj_data_sptr</b> () const</td></tr>
<tr class="separator:ac2697168d778f0da07da17edbe0c823c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68af5d956a8ac21373c404e766ea7534"><td class="memItemLeft" align="right" valign="top"><a id="a68af5d956a8ac21373c404e766ea7534"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>get_num_scatter_points</b> () const</td></tr>
<tr class="separator:a68af5d956a8ac21373c404e766ea7534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b230520b1ae03ca8ada9a3f501759b"><td class="memItemLeft" align="right" valign="top"><a id="a93b230520b1ae03ca8ada9a3f501759b"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1ProjDataInfoCylindricalNoArcCorr.html">ProjDataInfoCylindricalNoArcCorr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a93b230520b1ae03ca8ada9a3f501759b">get_template_proj_data_info_sptr</a> () const</td></tr>
<tr class="memdesc:a93b230520b1ae03ca8ada9a3f501759b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the template <a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a>. <br /></td></tr>
<tr class="separator:a93b230520b1ae03ca8ada9a3f501759b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f6a5c14423039b87fc014f66d62c17"><td class="memItemLeft" align="right" valign="top"><a id="ad6f6a5c14423039b87fc014f66d62c17"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ad6f6a5c14423039b87fc014f66d62c17">get_exam_info_sptr</a> () const</td></tr>
<tr class="memdesc:ad6f6a5c14423039b87fc014f66d62c17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="classstir_1_1ExamInfo.html" title="a class for storing information about 1 exam (or scan) ">ExamInfo</a> as shared pointer. <br /></td></tr>
<tr class="separator:ad6f6a5c14423039b87fc014f66d62c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68d332acf0f9175e5d10717d627ef55"><td class="memItemLeft" align="right" valign="top"><a id="ab68d332acf0f9175e5d10717d627ef55"></a>
const <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_activity_image</b> () const</td></tr>
<tr class="separator:ab68d332acf0f9175e5d10717d627ef55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e91143a59479b1bc023c564bc9396e"><td class="memItemLeft" align="right" valign="top"><a id="a85e91143a59479b1bc023c564bc9396e"></a>
const <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_attenuation_image</b> () const</td></tr>
<tr class="separator:a85e91143a59479b1bc023c564bc9396e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb61291fe071c2072e9bad8514dc686"><td class="memItemLeft" align="right" valign="top"><a id="afdb61291fe071c2072e9bad8514dc686"></a>
const <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_attenuation_image_for_scatter_points</b> () const</td></tr>
<tr class="separator:afdb61291fe071c2072e9bad8514dc686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da6abb9f9fabb1ed93cb9d96b9fcc40"><td class="memItemLeft" align="right" valign="top">shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a1da6abb9f9fabb1ed93cb9d96b9fcc40">get_density_image_for_scatter_points_sptr</a> () const</td></tr>
<tr class="separator:a1da6abb9f9fabb1ed93cb9d96b9fcc40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">set functions</div></td></tr>
<tr class="memitem:a47b73d1cf3f1be6519b36517d3ea6e78"><td class="memItemLeft" align="right" valign="top"><a id="a47b73d1cf3f1be6519b36517d3ea6e78"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_template_proj_data_info</b> (const std::string &amp;)</td></tr>
<tr class="separator:a47b73d1cf3f1be6519b36517d3ea6e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673d1055a0473ae63b6f5d72c1b420b4"><td class="memItemLeft" align="right" valign="top"><a id="a673d1055a0473ae63b6f5d72c1b420b4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_template_proj_data_info</b> (const <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &amp;)</td></tr>
<tr class="separator:a673d1055a0473ae63b6f5d72c1b420b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a004b7b2d60771bfc9c0f90b8a62b7f"><td class="memItemLeft" align="right" valign="top"><a id="a8a004b7b2d60771bfc9c0f90b8a62b7f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_activity_image_sptr</b> (const shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt; &amp;)</td></tr>
<tr class="separator:a8a004b7b2d60771bfc9c0f90b8a62b7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d998a135b6dcfade863e27f0875fc57"><td class="memItemLeft" align="right" valign="top"><a id="a0d998a135b6dcfade863e27f0875fc57"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_activity_image</b> (const std::string &amp;filename)</td></tr>
<tr class="separator:a0d998a135b6dcfade863e27f0875fc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add304a5a8bb7fb2610b1d581d27de8dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#add304a5a8bb7fb2610b1d581d27de8dd">set_exam_info</a> (const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &amp;)</td></tr>
<tr class="separator:add304a5a8bb7fb2610b1d581d27de8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c26430c5f2607be0052f087c0ac2aa"><td class="memItemLeft" align="right" valign="top"><a id="a01c26430c5f2607be0052f087c0ac2aa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_exam_info_sptr</b> (const shared_ptr&lt; <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt; &amp;)</td></tr>
<tr class="separator:a01c26430c5f2607be0052f087c0ac2aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3add16f1720c1a68d581d9b436630c72"><td class="memItemLeft" align="right" valign="top"><a id="a3add16f1720c1a68d581d9b436630c72"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_output_proj_data_sptr</b> (shared_ptr&lt; <a class="el" href="classstir_1_1ProjData.html">ProjData</a> &gt;)</td></tr>
<tr class="separator:a3add16f1720c1a68d581d9b436630c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abac018bb9de3522129fce02b923437c1"><td class="memItemLeft" align="right" valign="top"><a id="abac018bb9de3522129fce02b923437c1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_density_image_sptr</b> (const shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt; &amp;)</td></tr>
<tr class="separator:abac018bb9de3522129fce02b923437c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3804b6c24956293e4c21455f4f9a39"><td class="memItemLeft" align="right" valign="top"><a id="aae3804b6c24956293e4c21455f4f9a39"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_density_image</b> (const std::string &amp;)</td></tr>
<tr class="separator:aae3804b6c24956293e4c21455f4f9a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0ca6588a50ef6504d6a04f4addd7dd"><td class="memItemLeft" align="right" valign="top"><a id="a3b0ca6588a50ef6504d6a04f4addd7dd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a3b0ca6588a50ef6504d6a04f4addd7dd">set_output_proj_data</a> (const std::string &amp;)</td></tr>
<tr class="memdesc:a3b0ca6588a50ef6504d6a04f4addd7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function depends on the <a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a> of the scanner. You first have to set that. <br /></td></tr>
<tr class="separator:a3b0ca6588a50ef6504d6a04f4addd7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ddc748db23c037f8828ec34b0e2aa8"><td class="memItemLeft" align="right" valign="top"><a id="a23ddc748db23c037f8828ec34b0e2aa8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_output_proj_data_sptr</b> (const shared_ptr&lt; <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt; &amp;, const shared_ptr&lt; <a class="el" href="classstir_1_1ProjDataInfo.html">ProjDataInfo</a> &gt; &amp;, const std::string &amp;)</td></tr>
<tr class="separator:a23ddc748db23c037f8828ec34b0e2aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3774d1c9ba0bae060b13cf21ed72fd2"><td class="memItemLeft" align="right" valign="top"><a id="ae3774d1c9ba0bae060b13cf21ed72fd2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_density_image_for_scatter_points_sptr</b> (shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt;)</td></tr>
<tr class="separator:ae3774d1c9ba0bae060b13cf21ed72fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ea8c16be7af5c8e8c869dc2f13f4f4"><td class="memItemLeft" align="right" valign="top"><a id="a02ea8c16be7af5c8e8c869dc2f13f4f4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_image_downsample_factors</b> (float factor_xy=1.f, float factor_z=1.f, int _size_zoom_xy=-1, int _size_zoom_z=-1)</td></tr>
<tr class="separator:a02ea8c16be7af5c8e8c869dc2f13f4f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ddfdb6ce7dd4ba61b560f70a2cba62"><td class="memItemLeft" align="right" valign="top"><a id="a85ddfdb6ce7dd4ba61b560f70a2cba62"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a85ddfdb6ce7dd4ba61b560f70a2cba62">set_density_image_for_scatter_points</a> (const std::string &amp;)</td></tr>
<tr class="memdesc:a85ddfdb6ce7dd4ba61b560f70a2cba62"><td class="mdescLeft">&#160;</td><td class="mdescRight">set_density_image_for_scatter_points <br /></td></tr>
<tr class="separator:a85ddfdb6ce7dd4ba61b560f70a2cba62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84746a9bb523a979ed1ea2077f97ae31"><td class="memItemLeft" align="right" valign="top"><a id="a84746a9bb523a979ed1ea2077f97ae31"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a84746a9bb523a979ed1ea2077f97ae31">set_attenuation_threshold</a> (const float)</td></tr>
<tr class="memdesc:a84746a9bb523a979ed1ea2077f97ae31"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the attenuation threshold <br /></td></tr>
<tr class="separator:a84746a9bb523a979ed1ea2077f97ae31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87147b34d70b4f9d993fa4a8442e49e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a87147b34d70b4f9d993fa4a8442e49e4">set_randomly_place_scatter_points</a> (const bool)</td></tr>
<tr class="memdesc:a87147b34d70b4f9d993fa4a8442e49e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The scattering point in the voxel will be chosen randomly, instead of choosing the centre.  <a href="#a87147b34d70b4f9d993fa4a8442e49e4">More...</a><br /></td></tr>
<tr class="separator:a87147b34d70b4f9d993fa4a8442e49e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad891111c69b44722697d4049a05e254e"><td class="memItemLeft" align="right" valign="top"><a id="ad891111c69b44722697d4049a05e254e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_cache_enabled</b> (const bool)</td></tr>
<tr class="separator:ad891111c69b44722697d4049a05e254e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1RegisteredObjectBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1RegisteredObjectBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1RegisteredObjectBase.html">stir::RegisteredObjectBase</a></td></tr>
<tr class="memitem:a9eb7d6e93407316c0780e2121e522ae4 inherit pub_methods_classstir_1_1RegisteredObjectBase"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObjectBase.html#a9eb7d6e93407316c0780e2121e522ae4">get_registered_name</a> () const =0</td></tr>
<tr class="memdesc:a9eb7d6e93407316c0780e2121e522ae4 inherit pub_methods_classstir_1_1RegisteredObjectBase"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name of the type of the object.  <a href="classstir_1_1RegisteredObjectBase.html#a9eb7d6e93407316c0780e2121e522ae4">More...</a><br /></td></tr>
<tr class="separator:a9eb7d6e93407316c0780e2121e522ae4 inherit pub_methods_classstir_1_1RegisteredObjectBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:a15b8a585ba2b09674b823446bf8481bf inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a15b8a585ba2b09674b823446bf8481bf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ParsingObject</b> (const <a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;)</td></tr>
<tr class="separator:a15b8a585ba2b09674b823446bf8481bf inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20920a86db3428de6fd40381ef50aba4 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a20920a86db3428de6fd40381ef50aba4"></a>
<a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classstir_1_1ParsingObject.html">ParsingObject</a> &amp;)</td></tr>
<tr class="separator:a20920a86db3428de6fd40381ef50aba4 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268a7806a6ad7c78ec43f21582627163 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a268a7806a6ad7c78ec43f21582627163"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ask_parameters</b> ()</td></tr>
<tr class="separator:a268a7806a6ad7c78ec43f21582627163 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf7dc9a4725e6e6673b5cf36f8433a0b inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="acf7dc9a4725e6e6673b5cf36f8433a0b"></a>
virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><b>parameter_info</b> ()</td></tr>
<tr class="separator:acf7dc9a4725e6e6673b5cf36f8433a0b inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8597c63ee9c4e5c927117daf35f2b129 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="a8597c63ee9c4e5c927117daf35f2b129"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>parse</b> (std::istream &amp;f)</td></tr>
<tr class="separator:a8597c63ee9c4e5c927117daf35f2b129 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc5f10739c1dfb78fecd33c74d7d643 inherit pub_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="aedc5f10739c1dfb78fecd33c74d7d643"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>parse</b> (const char *const filename)</td></tr>
<tr class="separator:aedc5f10739c1dfb78fecd33c74d7d643 inherit pub_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Compton scatter cross sections</div></td></tr>
<tr class="memitem:a8ad145aa5ec73bc8a03f806fb1aed189"><td class="memItemLeft" align="right" valign="top"><a id="a8ad145aa5ec73bc8a03f806fb1aed189"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>dif_Compton_cross_section</b> (const float cos_theta, float energy)</td></tr>
<tr class="separator:a8ad145aa5ec73bc8a03f806fb1aed189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60829984a4122b66f556ea46df4816c9"><td class="memItemLeft" align="right" valign="top"><a id="a60829984a4122b66f556ea46df4816c9"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>total_Compton_cross_section</b> (float energy)</td></tr>
<tr class="separator:a60829984a4122b66f556ea46df4816c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66718ac6c477d38296db7a82bfcdb71b"><td class="memItemLeft" align="right" valign="top"><a id="a66718ac6c477d38296db7a82bfcdb71b"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>photon_energy_after_Compton_scatter</b> (const float cos_theta, const float energy)</td></tr>
<tr class="separator:a66718ac6c477d38296db7a82bfcdb71b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11263de78cf44a59cc1c7dd2ef4016e7"><td class="memItemLeft" align="right" valign="top"><a id="a11263de78cf44a59cc1c7dd2ef4016e7"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>photon_energy_after_Compton_scatter_511keV</b> (const float cos_theta)</td></tr>
<tr class="separator:a11263de78cf44a59cc1c7dd2ef4016e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119a5b89718d86813d7e5cbf3141f67a"><td class="memItemLeft" align="right" valign="top"><a id="a119a5b89718d86813d7e5cbf3141f67a"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>total_Compton_cross_section_relative_to_511keV</b> (const float energy)</td></tr>
<tr class="separator:a119a5b89718d86813d7e5cbf3141f67a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; ScatterSimulation &gt;</a></td></tr>
<tr class="memitem:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1ScatterSimulation.html">ScatterSimulation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#aa32357a52b98c87a1c38a162355c874e">read_registered_object</a> (std::istream *in, const std::string &amp;registered_name)</td></tr>
<tr class="memdesc:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new object (of a type derived from Root, its actual type determined by the registered_name parameter) by parsing the istream.  <a href="classstir_1_1RegisteredObject.html#aa32357a52b98c87a1c38a162355c874e">More...</a><br /></td></tr>
<tr class="separator:aa32357a52b98c87a1c38a162355c874e inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1ScatterSimulation.html">ScatterSimulation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a20ba04aadc52e375e5e97961ddb8f5e1">ask_type_and_parameters</a> ()</td></tr>
<tr class="memdesc:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">ask the user for the type, and then calls read_registered_object(0, type)  <a href="classstir_1_1RegisteredObject.html#a20ba04aadc52e375e5e97961ddb8f5e1">More...</a><br /></td></tr>
<tr class="separator:a20ba04aadc52e375e5e97961ddb8f5e1 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a7946572a60fac083300e2baaf650d6b8">list_registered_names</a> (std::ostream &amp;stream)</td></tr>
<tr class="memdesc:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">List all possible registered names to the stream.  <a href="classstir_1_1RegisteredObject.html#a7946572a60fac083300e2baaf650d6b8">More...</a><br /></td></tr>
<tr class="separator:a7946572a60fac083300e2baaf650d6b8 inherit pub_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a499408860ffb30966de6523eff524f39"><td class="memItemLeft" align="right" valign="top"><a id="a499408860ffb30966de6523eff524f39"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>image_type</b> { <b>act_image_type</b>, 
<b>att_image_type</b>
 }</td></tr>
<tr class="separator:a499408860ffb30966de6523eff524f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_types_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pro_types_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Protected Types inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; ScatterSimulation &gt;</a></td></tr>
<tr class="memitem:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top"><a id="a4497941e1fe3ec79b7a75085d75488fb"></a>
typedef <a class="el" href="classstir_1_1ScatterSimulation.html">ScatterSimulation</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a4497941e1fe3ec79b7a75085d75488fb">RootFactory</a>) (std::istream *)</td></tr>
<tr class="memdesc:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of a root factory is a function, taking an istream* as argument, and returning a Root*. <br /></td></tr>
<tr class="separator:a4497941e1fe3ec79b7a75085d75488fb inherit pro_types_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top"><a id="aa6dc41fd8a2cb0a5e1118aa32df98711"></a>
typedef <a class="el" href="classstir_1_1FactoryRegistry.html">FactoryRegistry</a>&lt; std::string, <a class="el" href="classstir_1_1RegisteredObject.html#a4497941e1fe3ec79b7a75085d75488fb">RootFactory</a>, <a class="el" href="structstir_1_1interfile__less.html">interfile_less</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#aa6dc41fd8a2cb0a5e1118aa32df98711">RegistryType</a></td></tr>
<tr class="memdesc:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the registry. <br /></td></tr>
<tr class="separator:aa6dc41fd8a2cb0a5e1118aa32df98711 inherit pro_types_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2e07a52a3b49a7f40c7b602aac98702e"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a2e07a52a3b49a7f40c7b602aac98702e">process_data_for_view_segment_num</a> (const <a class="el" href="classstir_1_1ViewSegmentNumbers.html">ViewSegmentNumbers</a> &amp;vs_num)</td></tr>
<tr class="memdesc:a2e07a52a3b49a7f40c7b602aac98702e"><td class="mdescLeft">&#160;</td><td class="mdescRight">computes scatter for one viewgram  <a href="#a2e07a52a3b49a7f40c7b602aac98702e">More...</a><br /></td></tr>
<tr class="separator:a2e07a52a3b49a7f40c7b602aac98702e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210865a140a9ec167af494d37f5d5c7b"><td class="memItemLeft" align="right" valign="top"><a id="a210865a140a9ec167af494d37f5d5c7b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>compute_emis_to_det_points_solid_angle_factor</b> (const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;emis_point, const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;detector_coord)</td></tr>
<tr class="separator:a210865a140a9ec167af494d37f5d5c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa6aa72012190de92cd2956a1041c3f"><td class="memItemLeft" align="right" valign="top"><a id="adfa6aa72012190de92cd2956a1041c3f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#adfa6aa72012190de92cd2956a1041c3f">set_defaults</a> ()</td></tr>
<tr class="memdesc:adfa6aa72012190de92cd2956a1041c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set defaults before parsing. <br /></td></tr>
<tr class="separator:adfa6aa72012190de92cd2956a1041c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd082570a71a04f28aad1ed06fc1e9e"><td class="memItemLeft" align="right" valign="top"><a id="a5dd082570a71a04f28aad1ed06fc1e9e"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a5dd082570a71a04f28aad1ed06fc1e9e">initialise_keymap</a> ()</td></tr>
<tr class="memdesc:a5dd082570a71a04f28aad1ed06fc1e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise all keywords. <br /></td></tr>
<tr class="separator:a5dd082570a71a04f28aad1ed06fc1e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6c2b8ae9a277f45caf1a94975a2517"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing</a> ()</td></tr>
<tr class="separator:a5c6c2b8ae9a277f45caf1a94975a2517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf1dd64ea30202fa1f0d30d76cc888b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#aaf1dd64ea30202fa1f0d30d76cc888b0">sample_scatter_points</a> ()</td></tr>
<tr class="memdesc:aaf1dd64ea30202fa1f0d30d76cc888b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">find scatter points  <a href="#aaf1dd64ea30202fa1f0d30d76cc888b0">More...</a><br /></td></tr>
<tr class="separator:aaf1dd64ea30202fa1f0d30d76cc888b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90121ef6321392ace57a452b21582b7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#aa90121ef6321392ace57a452b21582b7">remove_cache_for_integrals_over_attenuation</a> ()</td></tr>
<tr class="memdesc:aa90121ef6321392ace57a452b21582b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">remove cached attenuation integrals  <a href="#aa90121ef6321392ace57a452b21582b7">More...</a><br /></td></tr>
<tr class="separator:aa90121ef6321392ace57a452b21582b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905ab47dcdb78a56d2bc88212d4e6830"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a905ab47dcdb78a56d2bc88212d4e6830">remove_cache_for_integrals_over_activity</a> ()</td></tr>
<tr class="memdesc:a905ab47dcdb78a56d2bc88212d4e6830"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset cached activity integrals  <a href="#a905ab47dcdb78a56d2bc88212d4e6830">More...</a><br /></td></tr>
<tr class="separator:a905ab47dcdb78a56d2bc88212d4e6830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d2a0aadfb8843f647befccb940f7415"><td class="memItemLeft" align="right" valign="top"><a id="a1d2a0aadfb8843f647befccb940f7415"></a>
virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a1d2a0aadfb8843f647befccb940f7415">scatter_estimate</a> (const <a class="el" href="classstir_1_1Bin.html">Bin</a> &amp;bin)=0</td></tr>
<tr class="memdesc:a1d2a0aadfb8843f647befccb940f7415"><td class="mdescLeft">&#160;</td><td class="mdescRight">virtual function that computes the scatter for one (downsampled) bin <br /></td></tr>
<tr class="separator:a1d2a0aadfb8843f647befccb940f7415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad64dc03896944736f0b4244211ea81d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ad64dc03896944736f0b4244211ea81d1">initialise_cache_for_scattpoint_det_integrals_over_attenuation</a> ()</td></tr>
<tr class="memdesc:ad64dc03896944736f0b4244211ea81d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">set-up cache for attenuation integrals  <a href="#ad64dc03896944736f0b4244211ea81d1">More...</a><br /></td></tr>
<tr class="separator:ad64dc03896944736f0b4244211ea81d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bed3211dee815fef24e0eed74a9db35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a8bed3211dee815fef24e0eed74a9db35">initialise_cache_for_scattpoint_det_integrals_over_activity</a> ()</td></tr>
<tr class="memdesc:a8bed3211dee815fef24e0eed74a9db35"><td class="mdescLeft">&#160;</td><td class="mdescRight">set-up cache for activity integrals  <a href="#a8bed3211dee815fef24e0eed74a9db35">More...</a><br /></td></tr>
<tr class="separator:a8bed3211dee815fef24e0eed74a9db35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ParsingObject.html#ad8e81786834c010c96c31bce2bac3f6d">set_key_values</a> ()</td></tr>
<tr class="memdesc:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will be called before parsing or parameter_info is called.  <a href="classstir_1_1ParsingObject.html#ad8e81786834c010c96c31bce2bac3f6d">More...</a><br /></td></tr>
<tr class="separator:ad8e81786834c010c96c31bce2bac3f6d inherit pro_methods_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a2a3471257cdf58525394758b6b870202"><td class="memItemLeft" align="right" valign="top"><a id="a2a3471257cdf58525394758b6b870202"></a>
std::vector&lt; ScatterPoint &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>scatt_points_vector</b></td></tr>
<tr class="separator:a2a3471257cdf58525394758b6b870202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d11c91608ad6405cbcbab17a4386014"><td class="memItemLeft" align="right" valign="top"><a id="a0d11c91608ad6405cbcbab17a4386014"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>scatter_volume</b></td></tr>
<tr class="separator:a0d11c91608ad6405cbcbab17a4386014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99b1383b257c398c7a0ae342dcecaf9"><td class="memItemLeft" align="right" valign="top"><a id="ab99b1383b257c398c7a0ae342dcecaf9"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>template_proj_data_filename</b></td></tr>
<tr class="separator:ab99b1383b257c398c7a0ae342dcecaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebd13a3b48716373041c106966fddbfa"><td class="memItemLeft" align="right" valign="top"><a id="aebd13a3b48716373041c106966fddbfa"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1ProjDataInfoCylindricalNoArcCorr.html">ProjDataInfoCylindricalNoArcCorr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>proj_data_info_cyl_noarc_cor_sptr</b></td></tr>
<tr class="separator:aebd13a3b48716373041c106966fddbfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a673d6de75fd70e0133207ddc96c1d50b"><td class="memItemLeft" align="right" valign="top">shared_ptr&lt; <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a673d6de75fd70e0133207ddc96c1d50b">template_exam_info_sptr</a></td></tr>
<tr class="separator:a673d6de75fd70e0133207ddc96c1d50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c608084e9f67b4dff6956ea67d1d748"><td class="memItemLeft" align="right" valign="top"><a id="a2c608084e9f67b4dff6956ea67d1d748"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>density_image_filename</b></td></tr>
<tr class="separator:a2c608084e9f67b4dff6956ea67d1d748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3021ccc401d2b3c45c3bacc318f4e8d3"><td class="memItemLeft" align="right" valign="top"><a id="a3021ccc401d2b3c45c3bacc318f4e8d3"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>density_image_for_scatter_points_filename</b></td></tr>
<tr class="separator:a3021ccc401d2b3c45c3bacc318f4e8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc5e221d9be881c75a2d0be0e20cb58c"><td class="memItemLeft" align="right" valign="top"><a id="abc5e221d9be881c75a2d0be0e20cb58c"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>density_image_for_scatter_points_output_filename</b></td></tr>
<tr class="separator:abc5e221d9be881c75a2d0be0e20cb58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de9fe8db6396f2d4f982b705acfc0bc"><td class="memItemLeft" align="right" valign="top"><a id="a3de9fe8db6396f2d4f982b705acfc0bc"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>density_image_sptr</b></td></tr>
<tr class="separator:a3de9fe8db6396f2d4f982b705acfc0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a274fc1fa9d2f852f48e9f11168c1546e"><td class="memItemLeft" align="right" valign="top"><a id="a274fc1fa9d2f852f48e9f11168c1546e"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a274fc1fa9d2f852f48e9f11168c1546e">activity_image_sptr</a></td></tr>
<tr class="memdesc:a274fc1fa9d2f852f48e9f11168c1546e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to hold the current activity estimation. <br /></td></tr>
<tr class="separator:a274fc1fa9d2f852f48e9f11168c1546e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada599c16fcf58dd6e2074c696b76ace8"><td class="memItemLeft" align="right" valign="top"><a id="ada599c16fcf58dd6e2074c696b76ace8"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ada599c16fcf58dd6e2074c696b76ace8">output_proj_data_filename</a></td></tr>
<tr class="memdesc:ada599c16fcf58dd6e2074c696b76ace8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output proj_data fileanme prefix. <br /></td></tr>
<tr class="separator:ada599c16fcf58dd6e2074c696b76ace8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8edb7ad134ab83216f0d4ff82b52cd17"><td class="memItemLeft" align="right" valign="top"><a id="a8edb7ad134ab83216f0d4ff82b52cd17"></a>
shared_ptr&lt; <a class="el" href="classstir_1_1ProjData.html">ProjData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a8edb7ad134ab83216f0d4ff82b52cd17">output_proj_data_sptr</a></td></tr>
<tr class="memdesc:a8edb7ad134ab83216f0d4ff82b52cd17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared ptr to hold the simulated data. <br /></td></tr>
<tr class="separator:a8edb7ad134ab83216f0d4ff82b52cd17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cbb66183c898528a559573419f1ac0c"><td class="memItemLeft" align="right" valign="top"><a id="a8cbb66183c898528a559573419f1ac0c"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a8cbb66183c898528a559573419f1ac0c">attenuation_threshold</a></td></tr>
<tr class="memdesc:a8cbb66183c898528a559573419f1ac0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">threshold below which a voxel in the attenuation image will not be considered as a candidate scatter point <br /></td></tr>
<tr class="separator:a8cbb66183c898528a559573419f1ac0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74fd8f752659b119ce74b19bc98999d9"><td class="memItemLeft" align="right" valign="top"><a id="a74fd8f752659b119ce74b19bc98999d9"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a74fd8f752659b119ce74b19bc98999d9">randomly_place_scatter_points</a></td></tr>
<tr class="memdesc:a74fd8f752659b119ce74b19bc98999d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">boolean to see if we need to move the scatter point randomly within in its voxel <br /></td></tr>
<tr class="separator:a74fd8f752659b119ce74b19bc98999d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4957e7c047da88e769174e4cffb00a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ac4957e7c047da88e769174e4cffb00a2">use_cache</a></td></tr>
<tr class="memdesc:ac4957e7c047da88e769174e4cffb00a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">boolean to see if we need to cache the integrals  <a href="#ac4957e7c047da88e769174e4cffb00a2">More...</a><br /></td></tr>
<tr class="separator:ac4957e7c047da88e769174e4cffb00a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58fd07a23cc6f50d3da290ca489d67eb"><td class="memItemLeft" align="right" valign="top"><a id="a58fd07a23cc6f50d3da290ca489d67eb"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a58fd07a23cc6f50d3da290ca489d67eb">activity_image_filename</a></td></tr>
<tr class="memdesc:a58fd07a23cc6f50d3da290ca489d67eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename for the initial activity estimate. <br /></td></tr>
<tr class="separator:a58fd07a23cc6f50d3da290ca489d67eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c905f385686c0b752f3bab214e6545"><td class="memItemLeft" align="right" valign="top"><a id="a05c905f385686c0b752f3bab214e6545"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a05c905f385686c0b752f3bab214e6545">zoom_xy</a></td></tr>
<tr class="memdesc:a05c905f385686c0b752f3bab214e6545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoom factor on plane XY. Defaults on 1.f. <br /></td></tr>
<tr class="separator:a05c905f385686c0b752f3bab214e6545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35e08c567b5039d18fae81892177e58"><td class="memItemLeft" align="right" valign="top"><a id="ae35e08c567b5039d18fae81892177e58"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ae35e08c567b5039d18fae81892177e58">zoom_z</a></td></tr>
<tr class="memdesc:ae35e08c567b5039d18fae81892177e58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoom factor on Z axis. Defaults on 1.f. <br /></td></tr>
<tr class="separator:ae35e08c567b5039d18fae81892177e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a2c2baedcbc5e8eaa14dae8d4e5c66"><td class="memItemLeft" align="right" valign="top"><a id="a32a2c2baedcbc5e8eaa14dae8d4e5c66"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a32a2c2baedcbc5e8eaa14dae8d4e5c66">zoom_size_xy</a></td></tr>
<tr class="memdesc:a32a2c2baedcbc5e8eaa14dae8d4e5c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoomed image size on plane XY. Defaults on -1. <br /></td></tr>
<tr class="separator:a32a2c2baedcbc5e8eaa14dae8d4e5c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27bc15c04a1ef2ae78a6552b546a5a2f"><td class="memItemLeft" align="right" valign="top"><a id="a27bc15c04a1ef2ae78a6552b546a5a2f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a27bc15c04a1ef2ae78a6552b546a5a2f">zoom_size_z</a></td></tr>
<tr class="memdesc:a27bc15c04a1ef2ae78a6552b546a5a2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoomed image size on Z axis. Defaults on -1. <br /></td></tr>
<tr class="separator:a27bc15c04a1ef2ae78a6552b546a5a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f862ea893cb68ed7b9d8b8aa630da9"><td class="memItemLeft" align="right" valign="top"><a id="a16f862ea893cb68ed7b9d8b8aa630da9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a16f862ea893cb68ed7b9d8b8aa630da9">downsample_scanner_rings</a></td></tr>
<tr class="memdesc:a16f862ea893cb68ed7b9d8b8aa630da9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of rings of downsampled scanner. <br /></td></tr>
<tr class="separator:a16f862ea893cb68ed7b9d8b8aa630da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fbc794ed00c00fa3eb9585b62925346"><td class="memItemLeft" align="right" valign="top"><a id="a0fbc794ed00c00fa3eb9585b62925346"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a0fbc794ed00c00fa3eb9585b62925346">downsample_scanner_dets</a></td></tr>
<tr class="memdesc:a0fbc794ed00c00fa3eb9585b62925346"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of detectors per ring of downsampled scanner. <br /></td></tr>
<tr class="separator:a0fbc794ed00c00fa3eb9585b62925346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4ff6c0c051b99640850b91d4bd5fd4"><td class="memItemLeft" align="right" valign="top"><a id="acd4ff6c0c051b99640850b91d4bd5fd4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>downsample_scanner_bool</b></td></tr>
<tr class="separator:acd4ff6c0c051b99640850b91d4bd5fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classstir_1_1ParsingObject"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classstir_1_1ParsingObject')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classstir_1_1ParsingObject.html">stir::ParsingObject</a></td></tr>
<tr class="memitem:ac53aef0f7ecd5dbb6204239b14e657f8 inherit pro_attribs_classstir_1_1ParsingObject"><td class="memItemLeft" align="right" valign="top"><a id="ac53aef0f7ecd5dbb6204239b14e657f8"></a>
<a class="el" href="classstir_1_1KeyParser.html">KeyParser</a>&#160;</td><td class="memItemRight" valign="bottom"><b>parser</b></td></tr>
<tr class="separator:ac53aef0f7ecd5dbb6204239b14e657f8 inherit pro_attribs_classstir_1_1ParsingObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
detection related functions</h2></td></tr>
<tr class="memitem:a373303d0710b64d7e74115456e2f1e7a"><td class="memItemLeft" align="right" valign="top"><a id="a373303d0710b64d7e74115456e2f1e7a"></a>
<a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>shift_detector_coordinates_to_origin</b></td></tr>
<tr class="separator:a373303d0710b64d7e74115456e2f1e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d145e29a495b018596fb41cd702f94"><td class="memItemLeft" align="right" valign="top"><a id="aa9d145e29a495b018596fb41cd702f94"></a>
std::vector&lt; <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>detection_points_vector</b></td></tr>
<tr class="separator:aa9d145e29a495b018596fb41cd702f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133c9b3f5c8f336402d167d798dbe0d9"><td class="memItemLeft" align="right" valign="top"><a id="a133c9b3f5c8f336402d167d798dbe0d9"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>detection_efficiency</b> (const float energy) const</td></tr>
<tr class="separator:a133c9b3f5c8f336402d167d798dbe0d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab50b523f7b41132e7affdb32dfd228e4"><td class="memItemLeft" align="right" valign="top"><a id="ab50b523f7b41132e7affdb32dfd228e4"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>find_detectors</b> (unsigned &amp;det_num_A, unsigned &amp;det_num_B, const <a class="el" href="classstir_1_1Bin.html">Bin</a> &amp;bin) const</td></tr>
<tr class="separator:ab50b523f7b41132e7affdb32dfd228e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98f20b88f2d759f55ae564a54b363ea"><td class="memItemLeft" align="right" valign="top"><a id="ae98f20b88f2d759f55ae564a54b363ea"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>find_in_detection_points_vector</b> (const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;coord) const</td></tr>
<tr class="separator:ae98f20b88f2d759f55ae564a54b363ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ef06e363666ad97482150a68aa16a8"><td class="memItemLeft" align="right" valign="top"><a id="a01ef06e363666ad97482150a68aa16a8"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a01ef06e363666ad97482150a68aa16a8">detection_efficiency_no_scatter</a> (const unsigned det_num_A, const unsigned det_num_B) const</td></tr>
<tr class="memdesc:a01ef06e363666ad97482150a68aa16a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">average detection efficiency of unscattered counts <br /></td></tr>
<tr class="separator:a01ef06e363666ad97482150a68aa16a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f9848e55012feae7c91161f172d6407"><td class="memItemLeft" align="right" valign="top"><a id="a0f9848e55012feae7c91161f172d6407"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#a0f9848e55012feae7c91161f172d6407">max_cos_angle</a> (const float low, const float approx, const float resolution_at_511keV)</td></tr>
<tr class="memdesc:a0f9848e55012feae7c91161f172d6407"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum angle to consider above which detection after Compton scatter is considered too small <br /></td></tr>
<tr class="separator:a0f9848e55012feae7c91161f172d6407"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1cac96759dc829f3a59a1cc872659a0"><td class="memItemLeft" align="right" valign="top"><a id="ad1cac96759dc829f3a59a1cc872659a0"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1ScatterSimulation.html#ad1cac96759dc829f3a59a1cc872659a0">energy_lower_limit</a> (const float low, const float approx, const float resolution_at_511keV)</td></tr>
<tr class="memdesc:ad1cac96759dc829f3a59a1cc872659a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">mimumum energy to consider above which detection after Compton scatter is considered too small <br /></td></tr>
<tr class="separator:ad1cac96759dc829f3a59a1cc872659a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
integrating functions</h2></td></tr>
<tr class="memitem:a3080a4d625ff772e89306f7277fe9323"><td class="memItemLeft" align="right" valign="top"><a id="a3080a4d625ff772e89306f7277fe9323"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>exp_integral_over_attenuation_image_between_scattpoint_det</b> (const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;scatter_point, const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;detector_coord)</td></tr>
<tr class="separator:a3080a4d625ff772e89306f7277fe9323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b98ffa491f9b7ab280222f6353c75f0"><td class="memItemLeft" align="right" valign="top"><a id="a0b98ffa491f9b7ab280222f6353c75f0"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>integral_over_activity_image_between_scattpoint_det</b> (const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;scatter_point, const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;detector_coord)</td></tr>
<tr class="separator:a0b98ffa491f9b7ab280222f6353c75f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080507737764d508d36343866430965d"><td class="memItemLeft" align="right" valign="top"><a id="a080507737764d508d36343866430965d"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>cached_integral_over_activity_image_between_scattpoint_det</b> (const unsigned scatter_point_num, const unsigned det_num)</td></tr>
<tr class="separator:a080507737764d508d36343866430965d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae589116560a63d95c5c6cbdca66d6eaf"><td class="memItemLeft" align="right" valign="top"><a id="ae589116560a63d95c5c6cbdca66d6eaf"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>cached_exp_integral_over_attenuation_image_between_scattpoint_det</b> (const unsigned scatter_point_num, const unsigned det_num)</td></tr>
<tr class="separator:ae589116560a63d95c5c6cbdca66d6eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0afc862e1bd5583b35e5dcb35f7a3aab"><td class="memItemLeft" align="right" valign="top"><a id="a0afc862e1bd5583b35e5dcb35f7a3aab"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><b>integral_between_2_points</b> (const <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &amp;density, const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;point1, const <a class="el" href="classstir_1_1CartesianCoordinate3D.html">CartesianCoordinate3D</a>&lt; float &gt; &amp;point2)</td></tr>
<tr class="separator:a0afc862e1bd5583b35e5dcb35f7a3aab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_static_methods_classstir_1_1RegisteredObject"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classstir_1_1RegisteredObject')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classstir_1_1RegisteredObject.html">stir::RegisteredObject&lt; ScatterSimulation &gt;</a></td></tr>
<tr class="memitem:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classstir_1_1RegisteredObject.html#aa6dc41fd8a2cb0a5e1118aa32df98711">RegistryType</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RegisteredObject.html#a480c831d74fb41ff32787a908a07bbd3">registry</a> ()</td></tr>
<tr class="memdesc:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static function returning the registry.  <a href="classstir_1_1RegisteredObject.html#a480c831d74fb41ff32787a908a07bbd3">More...</a><br /></td></tr>
<tr class="separator:a480c831d74fb41ff32787a908a07bbd3 inherit pro_static_methods_classstir_1_1RegisteredObject"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Simulate the scatter probability using a model-based approach. </p>
<p>This base class intends to computes a Compton scatter estimate using an analytical approximation of an integral. It takes as input an emission image and an attenuation image. This is effectively an implementation of the simulation part of the algorithms of Watson and Ollinger. The base class takes care of downsampling and upsampling, book-keeping, caching and looping over bins.</p>
<p>One non-standard feature is that you can specify a different attenuation image to find the scatter points and one to compute the integrals over the attenuation image. The idea is that maybe you want to compute the integrals on a finer grid then you sample the attenuation image. This is probably not very useful though.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000161">Todo:</a></b></dt><dd>detector coordinates are derived from <a class="el" href="classstir_1_1ProjDataInfo.html" title="An (abstract base) class that contains information on the projection data. ">ProjDataInfo</a>, but areas and orientations are determined by using a cylindrical scanner.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000162">Todo:</a></b></dt><dd>variables/function named <code>density</code> really should use <code>attenuation</code>. This is currently only done for a few variables, but parsing keywords are correct.</dd></dl>
<dl class="section user"><dt>References</dt><dd>This implementation is described in the following <ol>
<li>
C. Tsoumpas, P. Aguiar, K. S. Nikita, D. Ros, K. Thielemans, <em>Evaluation of the Single Scatter Simulation Algorithm Implemented in the STIR Library</em>, Proc. of IEEE Medical Imaging Conf. 2004, vol. 6 pp. 3361 - 3365.  </li>
</ol>
Please refer to the above if you use this implementation.</dd></dl>
<p>See also these papers for extra evaluation</p>
<ol>
<li>
N. Dikaios , T. J. Spinks , K. Nikita , K. Thielemans, <em>Evaluation of the Scatter Simulation Algorithm Implemented in STIR,</em> proc. 5th ESBME, Patras, Greece.  </li>
<li>
P. Aguiar, Ch. Tsoumpas, C. Crespo, J. Pavia, C. Falcon, A. Cot, K. Thielemans and D. Ros, <em>Assessment of scattered photons in the quantification of the small animal PET studies,</em> Eur J Nucl Med Mol I 33:S315-S315 Sep 2006, Proc. EANM 2006, Athens, Greece.  </li>
<li>
I Polycarpou, P K Marsden and C Tsoumpas, <em>A comparative investigation of scatter correction in 3D PET</em>, J Phys: Conference Series (317), conference 1, 2011  </li>
</ol>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a1da6abb9f9fabb1ed93cb9d96b9fcc40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1da6abb9f9fabb1ed93cb9d96b9fcc40">&#9670;&nbsp;</a></span>get_density_image_for_scatter_points_sptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="classstir_1_1DiscretisedDensity.html">DiscretisedDensity</a>&lt; 3, float &gt; &gt; stir::ScatterSimulation::get_density_image_for_scatter_points_sptr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000023">Deprecated:</a></b></dt><dd></dd></dl>

<p class="reference">References <a class="el" href="classstir_1_1ScatterSimulation.html#a85ddfdb6ce7dd4ba61b560f70a2cba62">set_density_image_for_scatter_points()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>.</p>

</div>
</div>
<a id="add304a5a8bb7fb2610b1d581d27de8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add304a5a8bb7fb2610b1d581d27de8dd">&#9670;&nbsp;</a></span>set_exam_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::set_exam_info </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Since July 2016, the information for the energy window and energy resolution are stored in <a class="el" href="classstir_1_1ExamInfo.html" title="a class for storing information about 1 exam (or scan) ">ExamInfo</a>. </p>

<p class="reference">References <a class="el" href="classstir_1_1ExamInfo.html#a6717559481cb65d033e544a825ebcd8c">stir::ExamInfo::create_shared_clone()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#a673d6de75fd70e0133207ddc96c1d50b">template_exam_info_sptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#ad6f6a5c14423039b87fc014f66d62c17">get_exam_info_sptr()</a>.</p>

</div>
</div>
<a id="a87147b34d70b4f9d993fa4a8442e49e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87147b34d70b4f9d993fa4a8442e49e4">&#9670;&nbsp;</a></span>set_randomly_place_scatter_points()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::set_randomly_place_scatter_points </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The scattering point in the voxel will be chosen randomly, instead of choosing the centre. </p>
<p>This was first recommended by Watson. It is recommended to leave this on, as otherwise discretisation errors are more obvious.</p>
<p>Note that the random generator is seeded via date/time, so re-running the scatter simulation will give a slightly different result if this boolean is on. </p>

<p class="reference">References <a class="el" href="classstir_1_1ScatterSimulation.html#a74fd8f752659b119ce74b19bc98999d9">randomly_place_scatter_points</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ac4957e7c047da88e769174e4cffb00a2">use_cache</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#a5211a9c866839287500b96aae6d5edf8">write_log()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a84746a9bb523a979ed1ea2077f97ae31">set_attenuation_threshold()</a>.</p>

</div>
</div>
<a id="ac130313dcb61901a619e6397fcd375cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac130313dcb61901a619e6397fcd375cc">&#9670;&nbsp;</a></span>downsample_scanner()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a> stir::ScatterSimulation::downsample_scanner </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_num_rings</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_num_dets</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Downsample the scanner keeping the total axial length the same. </p>
<p>If <code>new_num_rings&lt;=0</code>, use rings of approximately 2 cm thickness. If <code>new_num_dets</code> &lt;=0, use the default set (currently set in <a class="el" href="classstir_1_1ScatterSimulation.html#adfa6aa72012190de92cd2956a1041c3f" title="Set defaults before parsing. ">set_defaults()</a>) </p>

<p class="reference">References <a class="el" href="group__buildblock.html#ga583ed7652f3528c16157897a96203bfd">_PI</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a0fbc794ed00c00fa3eb9585b62925346">downsample_scanner_dets</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a16f862ea893cb68ed7b9d8b8aa630da9">downsample_scanner_rings</a>, <a class="el" href="classstir_1_1Scanner.html#aeba39b832436927867bee200f63569a5">stir::Scanner::get_max_num_non_arccorrected_bins()</a>, <a class="el" href="classstir_1_1Scanner.html#a597cc048d2b4198d6264a681a407b6cd">stir::Scanner::get_num_detectors_per_ring()</a>, <a class="el" href="group__buildblock.html#ga58339978ae5e7a02db3ba4d82bff5ab6">stir::info()</a>, <a class="el" href="classstir_1_1ProjDataInfo.html#a0c1583497fd984adc41e5b465c039eb7">stir::ProjDataInfo::ProjDataInfoCTI()</a>, and <a class="el" href="namespacestir.html#a372ad4cac50cff397e0a334fe570ed18">stir::round()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>.</p>

</div>
</div>
<a id="a2f90bebcb4fd07bc484c0876c7575d8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f90bebcb4fd07bc484c0876c7575d8f">&#9670;&nbsp;</a></span>downsample_images_to_scanner_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstir_1_1Succeeded.html">Succeeded</a> stir::ScatterSimulation::downsample_images_to_scanner_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Downsamples activity and attenuation images to voxel sizes appropriate for the (downsampled) scanner. </p>
<p>This step is not necessary but could result in a speed-up in computing the line integrals. It also avoids problems with too high resolution images compared to the downsampled scanner.</p>
<p>Another way to resolve that is to smooth the images before the scatter simulation. This is currently not implemented in this class. </p><dl class="section warning"><dt>Warning</dt><dd>This function should be called after having set all data. </dd></dl>

<p class="reference">References <a class="el" href="classstir_1_1ScatterSimulation.html#a274fc1fa9d2f852f48e9f11168c1546e">activity_image_sptr</a>, <a class="el" href="classstir_1_1VoxelsOnCartesianGrid.html#a3734e2275c87308233e49888671f5c94">stir::VoxelsOnCartesianGrid&lt; elemT &gt;::get_empty_copy()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a905ab47dcdb78a56d2bc88212d4e6830">remove_cache_for_integrals_over_activity()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#aa90121ef6321392ace57a452b21582b7">remove_cache_for_integrals_over_attenuation()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a84746a9bb523a979ed1ea2077f97ae31">set_attenuation_threshold()</a>, and <a class="el" href="namespacestir.html#a29e5dea45344553f0cd3c8d75e6ecf9c">stir::zoom_image()</a>.</p>

</div>
</div>
<a id="a2e07a52a3b49a7f40c7b602aac98702e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e07a52a3b49a7f40c7b602aac98702e">&#9670;&nbsp;</a></span>process_data_for_view_segment_num()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double stir::ScatterSimulation::process_data_for_view_segment_num </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstir_1_1ViewSegmentNumbers.html">ViewSegmentNumbers</a> &amp;&#160;</td>
          <td class="paramname"><em>vs_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>computes scatter for one viewgram </p>
<dl class="section return"><dt>Returns</dt><dd>total scatter estimated for this viewgram </dd></dl>

<p class="reference">References <a class="el" href="classstir_1_1Bin.html#a9a4701eee8d1a61ac1a9f860b577feee">stir::Bin::axial_pos_num()</a>, <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f">stir::error()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a8edb7ad134ab83216f0d4ff82b52cd17">output_proj_data_sptr</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a1d2a0aadfb8843f647befccb940f7415">scatter_estimate()</a>, <a class="el" href="classstir_1_1ViewSegmentNumbers.html#a4743e5f2ecc108be2cc70e55525889c8">stir::ViewSegmentNumbers::segment_num()</a>, <a class="el" href="classstir_1_1Bin.html#a6d551b76c16bdf18d25e914b463a9db7">stir::Bin::tangential_pos_num()</a>, and <a class="el" href="classstir_1_1ViewSegmentNumbers.html#a1617faa1623970b35a40b77f5923efa4">stir::ViewSegmentNumbers::view_num()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a2059a15fb5947c1f5ba12ffc98509a94">ScatterSimulation()</a>.</p>

</div>
</div>
<a id="a5c6c2b8ae9a277f45caf1a94975a2517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6c2b8ae9a277f45caf1a94975a2517">&#9670;&nbsp;</a></span>post_processing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool stir::ScatterSimulation::post_processing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>post_processing will set everything that has a file name in the par file. The corresponding set functions should be used either for files that are not stored in the drive. </dd></dl>

<p>Reimplemented from <a class="el" href="classstir_1_1ParsingObject.html#a76911426e945844fe3429191db43af77">stir::ParsingObject</a>.</p>

<p>Reimplemented in <a class="el" href="classstir_1_1SingleScatterSimulation.html#a0572ac90c12834eefad954d9e6806385">stir::SingleScatterSimulation</a>.</p>

<p class="reference">References <a class="el" href="classstir_1_1ScatterSimulation.html#a58fd07a23cc6f50d3da290ca489d67eb">activity_image_filename</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a274fc1fa9d2f852f48e9f11168c1546e">activity_image_sptr</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#abbf4a6cf110457b11050379d492788df">downsample_density_image_for_scatter_points()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ac130313dcb61901a619e6397fcd375cc">downsample_scanner()</a>, <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f">stir::error()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a1da6abb9f9fabb1ed93cb9d96b9fcc40">get_density_image_for_scatter_points_sptr()</a>, <a class="el" href="classstir_1_1VectorWithOffset.html#a23a3bcc84639216e608406803d98f14e">stir::VectorWithOffset&lt; Array&lt; num_dimensions-1, elemT &gt; &gt;::get_max_index()</a>, <a class="el" href="classstir_1_1VectorWithOffset.html#a60196eb5ff5b91256df466ca4ddbd7fa">stir::VectorWithOffset&lt; Array&lt; num_dimensions-1, elemT &gt; &gt;::get_min_index()</a>, <a class="el" href="classstir_1_1Scanner.html#aa8f604e2efd17d51fc7e4c672893f242">stir::Scanner::get_num_rings()</a>, <a class="el" href="classstir_1_1Scanner.html#a813db3baed2672316f3eb0da461491df">stir::Scanner::get_ring_spacing()</a>, <a class="el" href="classstir_1_1VoxelsOnCartesianGrid.html#a903a6dca7fc3e4ebf2e9fff5a383affa">stir::VoxelsOnCartesianGrid&lt; elemT &gt;::get_voxel_size()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a8bed3211dee815fef24e0eed74a9db35">initialise_cache_for_scattpoint_det_integrals_over_activity()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ad64dc03896944736f0b4244211ea81d1">initialise_cache_for_scattpoint_det_integrals_over_attenuation()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ada599c16fcf58dd6e2074c696b76ace8">output_proj_data_filename</a>, <a class="el" href="group__IO.html#ga023d6e4a62c18b9df73dd31527f7c648">stir::read_from_file()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a905ab47dcdb78a56d2bc88212d4e6830">remove_cache_for_integrals_over_activity()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#aa90121ef6321392ace57a452b21582b7">remove_cache_for_integrals_over_attenuation()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#aaf1dd64ea30202fa1f0d30d76cc888b0">sample_scatter_points()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a85ddfdb6ce7dd4ba61b560f70a2cba62">set_density_image_for_scatter_points()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a3b0ca6588a50ef6504d6a04f4addd7dd">set_output_proj_data()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a673d6de75fd70e0133207ddc96c1d50b">template_exam_info_sptr</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a32a2c2baedcbc5e8eaa14dae8d4e5c66">zoom_size_xy</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a27bc15c04a1ef2ae78a6552b546a5a2f">zoom_size_z</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a05c905f385686c0b752f3bab214e6545">zoom_xy</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#ae35e08c567b5039d18fae81892177e58">zoom_z</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a5dd082570a71a04f28aad1ed06fc1e9e">initialise_keymap()</a>, and <a class="el" href="classstir_1_1SingleScatterSimulation.html#a0572ac90c12834eefad954d9e6806385">stir::SingleScatterSimulation::post_processing()</a>.</p>

</div>
</div>
<a id="aaf1dd64ea30202fa1f0d30d76cc888b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf1dd64ea30202fa1f0d30d76cc888b0">&#9670;&nbsp;</a></span>sample_scatter_points()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::sample_scatter_points </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>find scatter points </p>
<p>This function sets scatt_points_vector and scatter_volume. It will also remove any cached integrals as they would be incorrect otherwise. </p>

<p class="reference">References <a class="el" href="group__Coordinate.html#ga5a5493e3ee6159b3aac7b72bc0068f28">stir::convert_int_to_float()</a>, <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f">stir::error()</a>, <a class="el" href="classstir_1_1VectorWithOffset.html#a23a3bcc84639216e608406803d98f14e">stir::VectorWithOffset&lt; Array&lt; num_dimensions-1, elemT &gt; &gt;::get_max_index()</a>, <a class="el" href="classstir_1_1VectorWithOffset.html#a60196eb5ff5b91256df466ca4ddbd7fa">stir::VectorWithOffset&lt; Array&lt; num_dimensions-1, elemT &gt; &gt;::get_min_index()</a>, <a class="el" href="classstir_1_1DiscretisedDensity.html#ac7582de45a172909521d05f5670b3bbc">stir::DiscretisedDensity&lt; num_dimensions, elemT &gt;::get_origin()</a>, and <a class="el" href="classstir_1_1VoxelsOnCartesianGrid.html#a903a6dca7fc3e4ebf2e9fff5a383affa">stir::VoxelsOnCartesianGrid&lt; elemT &gt;::get_voxel_size()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#abbf4a6cf110457b11050379d492788df">downsample_density_image_for_scatter_points()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>.</p>

</div>
</div>
<a id="aa90121ef6321392ace57a452b21582b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90121ef6321392ace57a452b21582b7">&#9670;&nbsp;</a></span>remove_cache_for_integrals_over_attenuation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::remove_cache_for_integrals_over_attenuation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>remove cached attenuation integrals </p>
<p>should be used before recalculating scatter for a new attenuation image or when changing the sampling of the detector etc </p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#abbf4a6cf110457b11050379d492788df">downsample_density_image_for_scatter_points()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a2f90bebcb4fd07bc484c0876c7575d8f">downsample_images_to_scanner_size()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ad6f6a5c14423039b87fc014f66d62c17">get_exam_info_sptr()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#adfa6aa72012190de92cd2956a1041c3f">set_defaults()</a>.</p>

</div>
</div>
<a id="a905ab47dcdb78a56d2bc88212d4e6830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a905ab47dcdb78a56d2bc88212d4e6830">&#9670;&nbsp;</a></span>remove_cache_for_integrals_over_activity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::remove_cache_for_integrals_over_activity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>reset cached activity integrals </p>
<p>should be used before recalculating scatter for a new activity image or when changing the sampling of the detector etc </p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a2f90bebcb4fd07bc484c0876c7575d8f">downsample_images_to_scanner_size()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#ad6f6a5c14423039b87fc014f66d62c17">get_exam_info_sptr()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#adfa6aa72012190de92cd2956a1041c3f">set_defaults()</a>.</p>

</div>
</div>
<a id="ad64dc03896944736f0b4244211ea81d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad64dc03896944736f0b4244211ea81d1">&#9670;&nbsp;</a></span>initialise_cache_for_scattpoint_det_integrals_over_attenuation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::initialise_cache_for_scattpoint_det_integrals_over_attenuation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set-up cache for attenuation integrals </p>
<dl class="section warning"><dt>Warning</dt><dd>This will not remove existing cached data (if the sizes match). If you need this, call remove_cache_for_scattpoint_det_integrals_over_attenuation() first. </dd></dl>

<p class="reference">References <a class="el" href="classstir_1_1VectorWithOffset.html#aa0d7c80102ef873b5d60c52f3db4348d">stir::VectorWithOffset&lt; T &gt;::resize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>.</p>

</div>
</div>
<a id="a8bed3211dee815fef24e0eed74a9db35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bed3211dee815fef24e0eed74a9db35">&#9670;&nbsp;</a></span>initialise_cache_for_scattpoint_det_integrals_over_activity()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void stir::ScatterSimulation::initialise_cache_for_scattpoint_det_integrals_over_activity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set-up cache for activity integrals </p>
<dl class="section warning"><dt>Warning</dt><dd>This will not remove existing cached data (if the sizes match). If you need this, call remove_cache_for_scattpoint_det_integrals_over_activity() first. </dd></dl>

<p class="reference">References <a class="el" href="classstir_1_1VectorWithOffset.html#aa0d7c80102ef873b5d60c52f3db4348d">stir::VectorWithOffset&lt; T &gt;::resize()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a673d6de75fd70e0133207ddc96c1d50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a673d6de75fd70e0133207ddc96c1d50b">&#9670;&nbsp;</a></span>template_exam_info_sptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt;<a class="el" href="classstir_1_1ExamInfo.html">ExamInfo</a>&gt; stir::ScatterSimulation::template_exam_info_sptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Exam info extracted from the scanner template </p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#ad6f6a5c14423039b87fc014f66d62c17">get_exam_info_sptr()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a5c6c2b8ae9a277f45caf1a94975a2517">post_processing()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#add304a5a8bb7fb2610b1d581d27de8dd">set_exam_info()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#a3b0ca6588a50ef6504d6a04f4addd7dd">set_output_proj_data()</a>.</p>

</div>
</div>
<a id="ac4957e7c047da88e769174e4cffb00a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4957e7c047da88e769174e4cffb00a2">&#9670;&nbsp;</a></span>use_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool stir::ScatterSimulation::use_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>boolean to see if we need to cache the integrals </p>
<p>By default, we cache the integrals over the emission and attenuation image. If you run out of memory, you can switch this off, but performance will suffer dramatically. </p>

<p class="reference">Referenced by <a class="el" href="classstir_1_1ScatterSimulation.html#ae51090d355860be4f99c7e3534122057">ask_parameters()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#a5dd082570a71a04f28aad1ed06fc1e9e">initialise_keymap()</a>, <a class="el" href="classstir_1_1ScatterSimulation.html#adfa6aa72012190de92cd2956a1041c3f">set_defaults()</a>, and <a class="el" href="classstir_1_1ScatterSimulation.html#a87147b34d70b4f9d993fa4a8442e49e4">set_randomly_place_scatter_points()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/scatter/<a class="el" href="ScatterSimulation_8h_source.html">ScatterSimulation.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/scatter/<a class="el" href="ScatterSimulation_8inl.html">ScatterSimulation.inl</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/scatter_buildblock/<a class="el" href="cached__single__scatter__integrals_8cxx.html">cached_single_scatter_integrals.cxx</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/scatter_buildblock/<a class="el" href="sample__scatter__points_8cxx.html">sample_scatter_points.cxx</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/scatter_buildblock/<a class="el" href="scatter__detection__modelling_8cxx.html">scatter_detection_modelling.cxx</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/scatter_buildblock/<a class="el" href="ScatterSimulation_8cxx.html">ScatterSimulation.cxx</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/scatter_buildblock/<a class="el" href="single__scatter__integrals_8cxx.html">single_scatter_integrals.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 2 2021 10:00:40 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
