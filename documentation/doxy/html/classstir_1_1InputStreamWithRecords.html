<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::InputStreamWithRecords&lt; RecordT, OptionsT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">4.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1InputStreamWithRecords.html">InputStreamWithRecords</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classstir_1_1InputStreamWithRecords-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::InputStreamWithRecords&lt; RecordT, OptionsT &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__IO.html">Input/Output Library</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A helper class to read data from a (presumably binary) stream.  
 <a href="classstir_1_1InputStreamWithRecords.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="InputStreamWithRecords_8h_source.html">stir/IO/InputStreamWithRecords.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:af49bd5bfb336fbc7578ec7b036190651"><td class="memItemLeft" align="right" valign="top"><a id="af49bd5bfb336fbc7578ec7b036190651"></a>
typedef std::vector&lt; std::streampos &gt;::size_type&#160;</td><td class="memItemRight" valign="bottom"><b>SavedPosition</b></td></tr>
<tr class="separator:af49bd5bfb336fbc7578ec7b036190651"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab9e13fedca124f0bda004ad3473630f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#ab9e13fedca124f0bda004ad3473630f4">InputStreamWithRecords</a> (const shared_ptr&lt; std::istream &gt; &amp;stream_ptr, const std::size_t size_of_record_signature, const std::size_t max_size_of_record, const OptionsT &amp;options)</td></tr>
<tr class="memdesc:ab9e13fedca124f0bda004ad3473630f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor taking a stream.  <a href="#ab9e13fedca124f0bda004ad3473630f4">More...</a><br /></td></tr>
<tr class="separator:ab9e13fedca124f0bda004ad3473630f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a8eb4339a9c3152118c1d8f4f25336"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#a70a8eb4339a9c3152118c1d8f4f25336">InputStreamWithRecords</a> (const std::string &amp;filename, const std::size_t size_of_record_signature, const std::size_t max_size_of_record, const OptionsT &amp;options, const std::streampos start_of_data=0)</td></tr>
<tr class="memdesc:a70a8eb4339a9c3152118c1d8f4f25336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor taking a filename.  <a href="#a70a8eb4339a9c3152118c1d8f4f25336">More...</a><br /></td></tr>
<tr class="separator:a70a8eb4339a9c3152118c1d8f4f25336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b9a5ef8ca743c8742372f49c82b8ddb"><td class="memItemLeft" align="right" valign="top"><a id="a7b9a5ef8ca743c8742372f49c82b8ddb"></a>
virtual <a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><b>get_next_record</b> (RecordT &amp;record) const</td></tr>
<tr class="separator:a7b9a5ef8ca743c8742372f49c82b8ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a305c274a3dcf256237916f3fef7ee46a"><td class="memItemLeft" align="right" valign="top"><a id="a305c274a3dcf256237916f3fef7ee46a"></a>
<a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#a305c274a3dcf256237916f3fef7ee46a">reset</a> ()</td></tr>
<tr class="memdesc:a305c274a3dcf256237916f3fef7ee46a"><td class="mdescLeft">&#160;</td><td class="mdescRight">go back to starting position <br /></td></tr>
<tr class="separator:a305c274a3dcf256237916f3fef7ee46a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95c060642bfcc6405dfd31ab8e9958c8"><td class="memItemLeft" align="right" valign="top">SavedPosition&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#a95c060642bfcc6405dfd31ab8e9958c8">save_get_position</a> ()</td></tr>
<tr class="memdesc:a95c060642bfcc6405dfd31ab8e9958c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">save current "get" position in an internal array  <a href="#a95c060642bfcc6405dfd31ab8e9958c8">More...</a><br /></td></tr>
<tr class="separator:a95c060642bfcc6405dfd31ab8e9958c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae801266b12ff10d6ec1d973cda4de247"><td class="memItemLeft" align="right" valign="top"><a id="ae801266b12ff10d6ec1d973cda4de247"></a>
<a class="el" href="classstir_1_1Succeeded.html">Succeeded</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#ae801266b12ff10d6ec1d973cda4de247">set_get_position</a> (const SavedPosition &amp;)</td></tr>
<tr class="memdesc:ae801266b12ff10d6ec1d973cda4de247"><td class="mdescLeft">&#160;</td><td class="mdescRight">set current "get" position to previously saved value <br /></td></tr>
<tr class="separator:ae801266b12ff10d6ec1d973cda4de247"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea038b7d528d9c97f18025bfe598d9c9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::streampos &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#aea038b7d528d9c97f18025bfe598d9c9">get_saved_get_positions</a> () const</td></tr>
<tr class="memdesc:aea038b7d528d9c97f18025bfe598d9c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that enables the user to store the saved get_positions.  <a href="#aea038b7d528d9c97f18025bfe598d9c9">More...</a><br /></td></tr>
<tr class="separator:aea038b7d528d9c97f18025bfe598d9c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82b090b3f7ef94fd82563553a38ad7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1InputStreamWithRecords.html#ab82b090b3f7ef94fd82563553a38ad7a">set_saved_get_positions</a> (const std::vector&lt; std::streampos &gt; &amp;)</td></tr>
<tr class="memdesc:ab82b090b3f7ef94fd82563553a38ad7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that sets the saved get_positions.  <a href="#ab82b090b3f7ef94fd82563553a38ad7a">More...</a><br /></td></tr>
<tr class="separator:ab82b090b3f7ef94fd82563553a38ad7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a7169a2dddf8b9f23c5a5b9f0dc8a8e"><td class="memItemLeft" align="right" valign="top"><a id="a1a7169a2dddf8b9f23c5a5b9f0dc8a8e"></a>
std::istream &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>get_stream</b> ()</td></tr>
<tr class="separator:a1a7169a2dddf8b9f23c5a5b9f0dc8a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class RecordT, class OptionsT&gt;<br />
class stir::InputStreamWithRecords&lt; RecordT, OptionsT &gt;</h3>

<p>A helper class to read data from a (presumably binary) stream. </p>
<p>This class is really a helper class for reading different records from a stream. It is useful when all types of records have some kind of signature to allow the function to find out what the size of the record is. In that case, all IO handling is completely generic and is implemented in this class.</p>
<p>Current implementation needs a <code>max_size_of_record</code> to allocate enough memory (on the stack) before reading. This is efficient in many cases, but impractical in others.</p>
<dl class="section user"><dt>Requirements</dt><dd><code>RecordT</code> needs to have the following member functions <div class="fragment"><div class="line">std::size_t </div><div class="line">  size_of_record_at_ptr(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> buffer, <span class="keyword">const</span> std::size_t size_available_in_buffer, </div><div class="line">                        <span class="keyword">const</span> OptionsT options) <span class="keyword">const</span>;</div><div class="line"></div><div class="line">Succeeded </div><div class="line">  init_from_data_ptr(<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> buffer, </div><div class="line">                     <span class="keyword">const</span> std::size_t size_of_record, </div><div class="line">                     <span class="keyword">const</span> OptionsT options);</div></div><!-- fragment --></dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000044">Todo:</a></b></dt><dd>Allow choosing between allocation with <code>new</code> or on the stack. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab9e13fedca124f0bda004ad3473630f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9e13fedca124f0bda004ad3473630f4">&#9670;&nbsp;</a></span>InputStreamWithRecords() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT , class OptionsT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstir_1_1InputStreamWithRecords.html">stir::InputStreamWithRecords</a>&lt; RecordT, OptionsT &gt;::<a class="el" href="classstir_1_1InputStreamWithRecords.html">InputStreamWithRecords</a> </td>
          <td>(</td>
          <td class="paramtype">const shared_ptr&lt; std::istream &gt; &amp;&#160;</td>
          <td class="paramname"><em>stream_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>size_of_record_signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>max_size_of_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const OptionsT &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor taking a stream. </p>
<p>Data will be assumed to start at the current position reported by seekg(). If <a class="el" href="classstir_1_1InputStreamWithRecords.html#a305c274a3dcf256237916f3fef7ee46a" title="go back to starting position ">reset()</a> is used, it will go back to this starting position. </p>

</div>
</div>
<a id="a70a8eb4339a9c3152118c1d8f4f25336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a8eb4339a9c3152118c1d8f4f25336">&#9670;&nbsp;</a></span>InputStreamWithRecords() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT , class OptionsT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstir_1_1InputStreamWithRecords.html">stir::InputStreamWithRecords</a>&lt; RecordT, OptionsT &gt;::<a class="el" href="classstir_1_1InputStreamWithRecords.html">InputStreamWithRecords</a> </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>size_of_record_signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t&#160;</td>
          <td class="paramname"><em>max_size_of_record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const OptionsT &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::streampos&#160;</td>
          <td class="paramname"><em>start_of_data</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor taking a filename. </p>
<p>File will be opened in binary mode. Data will be assumed to start at <em>start_of_data</em>. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a95c060642bfcc6405dfd31ab8e9958c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95c060642bfcc6405dfd31ab8e9958c8">&#9670;&nbsp;</a></span>save_get_position()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT , class OptionsT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SavedPosition <a class="el" href="classstir_1_1InputStreamWithRecords.html">stir::InputStreamWithRecords</a>&lt; RecordT, OptionsT &gt;::save_get_position </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>save current "get" position in an internal array </p>
<dl class="section return"><dt>Returns</dt><dd>an "index" into the array that allows you to go back. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classstir_1_1InputStreamWithRecords.html#ae801266b12ff10d6ec1d973cda4de247" title="set current &quot;get&quot; position to previously saved value ">set_get_position</a> </dd></dl>

</div>
</div>
<a id="aea038b7d528d9c97f18025bfe598d9c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea038b7d528d9c97f18025bfe598d9c9">&#9670;&nbsp;</a></span>get_saved_get_positions()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT , class OptionsT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::streampos&gt; <a class="el" href="classstir_1_1InputStreamWithRecords.html">stir::InputStreamWithRecords</a>&lt; RecordT, OptionsT &gt;::get_saved_get_positions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that enables the user to store the saved get_positions. </p>
<p>Together with <a class="el" href="classstir_1_1InputStreamWithRecords.html#ab82b090b3f7ef94fd82563553a38ad7a" title="Function that sets the saved get_positions. ">set_saved_get_positions()</a>, this allows reinstating the saved get_positions when reopening the same stream. </p>

</div>
</div>
<a id="ab82b090b3f7ef94fd82563553a38ad7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab82b090b3f7ef94fd82563553a38ad7a">&#9670;&nbsp;</a></span>set_saved_get_positions()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class RecordT , class OptionsT &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classstir_1_1InputStreamWithRecords.html">stir::InputStreamWithRecords</a>&lt; RecordT, OptionsT &gt;::set_saved_get_positions </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::streampos &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that sets the saved get_positions. </p>
<p>Normally, the argument results from a call to <a class="el" href="classstir_1_1InputStreamWithRecords.html#aea038b7d528d9c97f18025bfe598d9c9" title="Function that enables the user to store the saved get_positions. ">get_saved_get_positions()</a> on the same stream. </p><dl class="section warning"><dt>Warning</dt><dd>There is no check if the argument actually makes sense for the current stream. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/IO/<a class="el" href="InputStreamWithRecords_8h_source.html">InputStreamWithRecords.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 22 2020 09:05:24 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
