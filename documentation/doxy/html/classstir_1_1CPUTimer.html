<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::CPUTimer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">6.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1CPUTimer.html">CPUTimer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classstir_1_1CPUTimer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::CPUTimer Class Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__buildblock.html">Basic building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A class for measuring elapsed CPU time.  
 <a href="classstir_1_1CPUTimer.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="CPUTimer_8h_source.html">stir/CPUTimer.h</a>&quot;</code></p>
<div class="dynheader">
Inheritance diagram for stir::CPUTimer:</div>
<div class="dyncontent">
<div class="center"><img src="classstir_1_1CPUTimer__inherit__graph.png" border="0" usemap="#stir_1_1CPUTimer_inherit__map" alt="Inheritance graph"/></div>
<map name="stir_1_1CPUTimer_inherit__map" id="stir_1_1CPUTimer_inherit__map">
<area shape="rect" id="node2" href="classstir_1_1Timer.html" title="A general base class for timers. Interface is like a stop watch. " alt="" coords="20,5,101,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_methods_classstir_1_1Timer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classstir_1_1Timer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classstir_1_1Timer.html">stir::Timer</a></td></tr>
<tr class="memitem:a41c317e6c5f1dfcb1446b47d4a15af88 inherit pub_methods_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1Timer.html#a41c317e6c5f1dfcb1446b47d4a15af88">start</a> (bool do_reset=false)</td></tr>
<tr class="memdesc:a41c317e6c5f1dfcb1446b47d4a15af88 inherit pub_methods_classstir_1_1Timer"><td class="mdescLeft">&#160;</td><td class="mdescRight">start stopwatch, optionally resetting first  <a href="classstir_1_1Timer.html#a41c317e6c5f1dfcb1446b47d4a15af88">More...</a><br /></td></tr>
<tr class="separator:a41c317e6c5f1dfcb1446b47d4a15af88 inherit pub_methods_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64c0f28a821dd71980624e82dfd3dcb inherit pub_methods_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top"><a id="ab64c0f28a821dd71980624e82dfd3dcb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1Timer.html#ab64c0f28a821dd71980624e82dfd3dcb">stop</a> ()</td></tr>
<tr class="memdesc:ab64c0f28a821dd71980624e82dfd3dcb inherit pub_methods_classstir_1_1Timer"><td class="mdescLeft">&#160;</td><td class="mdescRight">stop stopwatch <br /></td></tr>
<tr class="separator:ab64c0f28a821dd71980624e82dfd3dcb inherit pub_methods_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b893fb2c3518031a795fb063d87835 inherit pub_methods_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1Timer.html#a36b893fb2c3518031a795fb063d87835">reset</a> ()</td></tr>
<tr class="memdesc:a36b893fb2c3518031a795fb063d87835 inherit pub_methods_classstir_1_1Timer"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset stopwatch  <a href="classstir_1_1Timer.html#a36b893fb2c3518031a795fb063d87835">More...</a><br /></td></tr>
<tr class="separator:a36b893fb2c3518031a795fb063d87835 inherit pub_methods_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea24315ad56b184fb19951b73cd8fff0 inherit pub_methods_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top"><a id="aea24315ad56b184fb19951b73cd8fff0"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1Timer.html#aea24315ad56b184fb19951b73cd8fff0">value</a> () const</td></tr>
<tr class="memdesc:aea24315ad56b184fb19951b73cd8fff0 inherit pub_methods_classstir_1_1Timer"><td class="mdescLeft">&#160;</td><td class="mdescRight">return value is undefined when <a class="el" href="classstir_1_1Timer.html#a41c317e6c5f1dfcb1446b47d4a15af88" title="start stopwatch, optionally resetting first ">start()</a> is not called first. <br /></td></tr>
<tr class="separator:aea24315ad56b184fb19951b73cd8fff0 inherit pub_methods_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classstir_1_1Timer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classstir_1_1Timer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classstir_1_1Timer.html">stir::Timer</a></td></tr>
<tr class="memitem:af1b01e94fce64e0210cb78d2d4997ffe inherit pro_attribs_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top"><a id="af1b01e94fce64e0210cb78d2d4997ffe"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>running</b></td></tr>
<tr class="separator:af1b01e94fce64e0210cb78d2d4997ffe inherit pro_attribs_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107bf32e4914fb94868d5cbf56d6aa1b inherit pro_attribs_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top"><a id="a107bf32e4914fb94868d5cbf56d6aa1b"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>previous_value</b></td></tr>
<tr class="separator:a107bf32e4914fb94868d5cbf56d6aa1b inherit pro_attribs_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29dcdf3a03bfa51be47841da166896e6 inherit pro_attribs_classstir_1_1Timer"><td class="memItemLeft" align="right" valign="top"><a id="a29dcdf3a03bfa51be47841da166896e6"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>previous_total_value</b></td></tr>
<tr class="separator:a29dcdf3a03bfa51be47841da166896e6 inherit pro_attribs_classstir_1_1Timer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for measuring elapsed CPU time. </p>
<p><a class="el" href="classstir_1_1CPUTimer.html" title="A class for measuring elapsed CPU time. ">CPUTimer</a> is derived from <a class="el" href="classstir_1_1Timer.html" title="A general base class for timers. Interface is like a stop watch. ">Timer</a>, and hence has the same interface. It returns the amount of CPU time (in secs) used by the current process and its children. </p><dl class="section warning"><dt>Warning</dt><dd>If too long CPU times are measured, wrap-around will occur. </dd>
<dd>
Currently, <a class="el" href="classstir_1_1CPUTimer.html" title="A class for measuring elapsed CPU time. ">CPUTimer</a> returns garbage on Win95 (and probably Win98). It does work fine on NT, XP etc though.</dd></dl>
<dl class="section user"><dt>Implementation details</dt><dd></dd></dl>
<p>For most systems, <a class="el" href="classstir_1_1Timer.html#aea24315ad56b184fb19951b73cd8fff0" title="return value is undefined when start() is not called first. ">CPUTimer::value()</a> returns elapsed CPU time using the ANSI clock() function. From the man page: </p><pre class="fragment">The reported time is the sum
of the CPU time of the calling process and its terminated child
processes for which it has executed wait, system, or pclose
subroutines.
</pre><p> clock() has a possible problem of wrap-around. For many Unix systems this occurs very soon. For a SUN, the man page states this is every 2147 secs of CPU time (36 minutes !). AIX should be similar, as both have CLOCKS_PER_SEC = 10e6, and clock_t == int == 32 bit.</p>
<p>So, since version 1.2 the times() function (with the rms_utime field) is used if <code>defined(<b>OS_UNIX</b>)</code>. The man page for times() states something very similar to clock():</p>
<p><em> tms_utime : The CPU time used for executing instructions in the user space of the calling process.</em></p>
<p><em> This information is read from the calling process as well as from each completed child process for which the calling process executed a wait subroutine. </em></p>
<p>As times() returns results measured in clock interrupt clicks (on AIX 100 per second), wrap around occurs much later.</p>
<p>Finally, VC++ 5.0 seems to have a bug in clock() that makes its results dependent on the load of the system (i.e. it is more like 'wall clock time'). We now use GetProcessTimes() (with the lpUserTime variable) instead. The documentation states:</p>
<p><em> ... the amount of time that the process has executed in user mode. The time that each of the threads of the process has executed in user mode is determined, and then all of those times are summed together to obtain this value. </em></p>
<p>Warning: this only works for NT, not for Win95 </p>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/<a class="el" href="CPUTimer_8h_source.html">CPUTimer.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/<a class="el" href="CPUTimer_8inl.html">CPUTimer.inl</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 31 2025 13:54:47 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
