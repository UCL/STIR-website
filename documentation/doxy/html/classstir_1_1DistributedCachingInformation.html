<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: stir::DistributedCachingInformation Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">4.0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestir.html">stir</a></li><li class="navelem"><a class="el" href="classstir_1_1DistributedCachingInformation.html">DistributedCachingInformation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classstir_1_1DistributedCachingInformation-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">stir::DistributedCachingInformation Class Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__recon__buildblock.html">Reconstruction building blocks</a> &raquo; <a class="el" href="group__distributable.html">distributable building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class implements the logic needed to support caching in a distributed manner.  
 <a href="classstir_1_1DistributedCachingInformation.html#details">More...</a></p>

<p><code>#include &quot;<a class="el" href="DistributedCachingInformation_8h_source.html">stir/recon_buildblock/DistributedCachingInformation.h</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a017124c56d90d95d3e3402b4a37c1c32"><td class="memItemLeft" align="right" valign="top"><a id="a017124c56d90d95d3e3402b4a37c1c32"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedCachingInformation.html#a017124c56d90d95d3e3402b4a37c1c32">DistributedCachingInformation</a> (const int num_processors)</td></tr>
<tr class="memdesc:a017124c56d90d95d3e3402b4a37c1c32"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor, calls <a class="el" href="classstir_1_1DistributedCachingInformation.html#a4f7c51fe3caedc8a507d6675333dddbf" title="initialise all data structures called by the constructor, but should be called before processing a ne...">initialise()</a> <br /></td></tr>
<tr class="separator:a017124c56d90d95d3e3402b4a37c1c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca765289aec80632ac11f22ef39d6e0"><td class="memItemLeft" align="right" valign="top"><a id="a4ca765289aec80632ac11f22ef39d6e0"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedCachingInformation.html#a4ca765289aec80632ac11f22ef39d6e0">~DistributedCachingInformation</a> ()</td></tr>
<tr class="memdesc:a4ca765289aec80632ac11f22ef39d6e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor to clean up data structures <br /></td></tr>
<tr class="separator:a4ca765289aec80632ac11f22ef39d6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f7c51fe3caedc8a507d6675333dddbf"><td class="memItemLeft" align="right" valign="top"><a id="a4f7c51fe3caedc8a507d6675333dddbf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedCachingInformation.html#a4f7c51fe3caedc8a507d6675333dddbf">initialise</a> ()</td></tr>
<tr class="memdesc:a4f7c51fe3caedc8a507d6675333dddbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialise all data structures called by the constructor, but should be called before processing a new set of data. calls <a class="el" href="classstir_1_1DistributedCachingInformation.html#a83314242ff0d4d7ab0eb8be82c5e07f9" title="to be called at the beginning of the processing of a set of data The caching data is kept...">initialise_new_subiteration()</a> with an empty vector <br /></td></tr>
<tr class="separator:a4f7c51fe3caedc8a507d6675333dddbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83314242ff0d4d7ab0eb8be82c5e07f9"><td class="memItemLeft" align="right" valign="top"><a id="a83314242ff0d4d7ab0eb8be82c5e07f9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedCachingInformation.html#a83314242ff0d4d7ab0eb8be82c5e07f9">initialise_new_subiteration</a> (const std::vector&lt; <a class="el" href="classstir_1_1ViewSegmentNumbers.html">ViewSegmentNumbers</a> &gt; &amp;vs_nums_to_process)</td></tr>
<tr class="memdesc:a83314242ff0d4d7ab0eb8be82c5e07f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">to be called at the beginning of the processing of a set of data The caching data is kept, such that the cache will be re-used over multiple runs. <br /></td></tr>
<tr class="separator:a83314242ff0d4d7ab0eb8be82c5e07f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a2e08c315311ff86c7230ba3a5d90e3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1DistributedCachingInformation.html#a3a2e08c315311ff86c7230ba3a5d90e3">get_unprocessed_vs_num</a> (<a class="el" href="classstir_1_1ViewSegmentNumbers.html">ViewSegmentNumbers</a> &amp;vs_num, int proc)</td></tr>
<tr class="memdesc:a3a2e08c315311ff86c7230ba3a5d90e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the next work-package for a given processor  <a href="#a3a2e08c315311ff86c7230ba3a5d90e3">More...</a><br /></td></tr>
<tr class="separator:a3a2e08c315311ff86c7230ba3a5d90e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class implements the logic needed to support caching in a distributed manner. </p>
<p>To enable distributed caching, the master needs to store how the view segment numbers or the related viewgrams respectively were distributed between the workers. Doing that, the master is able to send those viegrams to a slave requesting for work, which that specific slave already handled before and still has cached locally. Additionally it is possible to only send the view segment number instead of the whole projection data, if the the worker stores the recieved related viewgrams.</p>
<p>This class stores all needed information to determine a not yet processed view segment number that will be sent to the requesting slave in such a way that the belonging data most likely is stored in the slaves cache.</p>
<p>The function <code><a class="el" href="classstir_1_1DistributedCachingInformation.html#a3a2e08c315311ff86c7230ba3a5d90e3" title="get the next work-package for a given processor ">get_unprocessed_vs_num()</a></code> can be called by the master, passing the requesting worker and the current subset to determine the next processed view segment number</p>
<p>The logic is a bit sophisticated, as it has to make sure, that every vs_num is only processed once and that load balancing is forced. T</p>
<p>Process numbers are expected to be between 0 and <code>num_workers</code> </p>
<p>Whether to use the cache enabled function or not can be set by the parsing parameter </p><pre class="fragment">  enable distributed caching := 0
</pre><p> within the parameter specification for the objective function, where 1 activates it and 0 deactivates caching. The default is set to 0. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3a2e08c315311ff86c7230ba3a5d90e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a2e08c315311ff86c7230ba3a5d90e3">&#9670;&nbsp;</a></span>get_unprocessed_vs_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool stir::DistributedCachingInformation::get_unprocessed_vs_num </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classstir_1_1ViewSegmentNumbers.html">ViewSegmentNumbers</a> &amp;&#160;</td>
          <td class="paramname"><em>vs_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>proc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the next work-package for a given processor </p>
<dl class="section warning"><dt>Warning</dt><dd>this must only be called if there for sure is an unprocessed vs_num left, otherwise it will call <a class="el" href="group__buildblock.html#ga19b3ad285f04d613640a497f868b385f" title="Print error with format string a la printf and throw exception. ">stir::error()</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">vs_num</td><td>will be set accordingly </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">proc</td><td>the processor for which the View-Segment-Numbers are calculated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the vs_num was not in the cache of the processor This function updates internal cache values etc. The user can just repeatedly call the function without worrying about the caching algorithm. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/recon_buildblock/<a class="el" href="DistributedCachingInformation_8h_source.html">DistributedCachingInformation.h</a></li>
<li>/home/sirfuser/devel/STIRdistrib/STIR/src/recon_buildblock/<a class="el" href="DistributedCachingInformation_8cxx.html">DistributedCachingInformation.cxx</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 22 2020 09:05:20 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
