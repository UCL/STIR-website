<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STIR: /home/sirfuser/devel/STIRdistrib/STIR/src/include/stir/zoom.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STIR
   &#160;<span id="projectnumber">6.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_43e0a1f539e00dcfa1a6bc4d4fee4fc2.html">home</a></li><li class="navelem"><a class="el" href="dir_0b75bdf102f5cf4910d6429d56a66609.html">sirfuser</a></li><li class="navelem"><a class="el" href="dir_bf00ec6aee8436d9dd9bdb27c8ba69c2.html">devel</a></li><li class="navelem"><a class="el" href="dir_f033b80aa1e53a09c27a870e567321ae.html">STIRdistrib</a></li><li class="navelem"><a class="el" href="dir_dee4efe29267f8f1fbd97b7b185bc024.html">STIR</a></li><li class="navelem"><a class="el" href="dir_4d737faa33632d919b5a76c7a560514d.html">src</a></li><li class="navelem"><a class="el" href="dir_a02104478bda72235ead8713d4759134.html">include</a></li><li class="navelem"><a class="el" href="dir_b362d050fbe6d98140ed06b65ae8ad4c.html">stir</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">zoom.h File Reference<div class="ingroups"><a class="el" href="group__STIR.html">STIR</a> &raquo; <a class="el" href="group__STIR__library.html">STIR library</a> &raquo; <a class="el" href="group__buildblock.html">Basic building blocks</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This file declares various zooming functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h_source.html">stir/common.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ZoomOptions_8h_source.html">stir/ZoomOptions.h</a>&quot;</code><br />
</div>
<p><a href="zoom_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1Viewgram.html">stir::Viewgram&lt; elemT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for 2d projection data.  <a href="classstir_1_1Viewgram.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1RelatedViewgrams.html">stir::RelatedViewgrams&lt; elemT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class for storing viewgrams which are related by symmetry.  <a href="classstir_1_1RelatedViewgrams.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1VoxelsOnCartesianGrid.html">stir::VoxelsOnCartesianGrid&lt; elemT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used to represent voxelised densities on a cuboid grid (3D).  <a href="classstir_1_1VoxelsOnCartesianGrid.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1PixelsOnCartesianGrid.html">stir::PixelsOnCartesianGrid&lt; elemT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used to represent pixelised densities on a rectangular grid (2D).  <a href="classstir_1_1PixelsOnCartesianGrid.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1CartesianCoordinate3D.html">stir::CartesianCoordinate3D&lt; coordT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a templated class for 3-dimensional coordinates.  <a href="classstir_1_1CartesianCoordinate3D.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstir_1_1BasicCoordinate.html">stir::BasicCoordinate&lt; num_dimensions, coordT &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">class <a class="el" href="classstir_1_1BasicCoordinate.html" title="class BasicCoordinate&lt;int num_dimensions, typename coordT&gt; defines num_dimensions -dimensional coordi...">BasicCoordinate</a>&lt;<code>int</code> <code>num_dimensions</code>, <code>typename</code> <code>coordT&gt;</code> defines <code>num_dimensions</code> -dimensional coordinates.  <a href="classstir_1_1BasicCoordinate.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacestir"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html">stir</a></td></tr>
<tr class="memdesc:namespacestir"><td class="mdescLeft">&#160;</td><td class="mdescRight">Namespace for the STIR library (and some/most of its applications) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Functions for interpolating data to new pixel/bin sizes</div></td></tr>
<tr class="memitem:aea872700aa9933869324dd93547666ba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#aea872700aa9933869324dd93547666ba">stir::zoom_viewgrams</a> (RelatedViewgrams&lt; float &gt; &amp;viewgrams, const float zoom, const int min_tang_pos_num, const int max_tang_pos_num, const float x_offset_in_mm=0, const float y_offset_in_mm=0)</td></tr>
<tr class="memdesc:aea872700aa9933869324dd93547666ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom a <a class="el" href="classstir_1_1RelatedViewgrams.html" title="A class for storing viewgrams which are related by symmetry. ">RelatedViewgrams</a> object, replacing it with the new data  <a href="namespacestir.html#aea872700aa9933869324dd93547666ba">More...</a><br /></td></tr>
<tr class="separator:aea872700aa9933869324dd93547666ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923e416f1e4a40554e700f3df8c6ecf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a923e416f1e4a40554e700f3df8c6ecf6">stir::zoom_viewgram</a> (Viewgram&lt; float &gt; &amp;viewgram, const float zoom, const int min_tang_pos_num, const int max_tang_pos_num, const float x_offset_in_mm=0, const float y_offset_in_mm=0)</td></tr>
<tr class="memdesc:a923e416f1e4a40554e700f3df8c6ecf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>viewgram</em>, replacing it with the new data  <a href="namespacestir.html#a923e416f1e4a40554e700f3df8c6ecf6">More...</a><br /></td></tr>
<tr class="separator:a923e416f1e4a40554e700f3df8c6ecf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c873c2a461e8a4cc5b22551f7f61e3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a8c873c2a461e8a4cc5b22551f7f61e3e">stir::zoom_viewgram</a> (Viewgram&lt; float &gt; &amp;out_viewgram, const Viewgram&lt; float &gt; &amp;in_viewgram, const float x_offset_in_mm=0, const float y_offset_in_mm=0)</td></tr>
<tr class="memdesc:a8c873c2a461e8a4cc5b22551f7f61e3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>in_viewgram</em>, replacing <em>out_viewgram</em> with the new data  <a href="namespacestir.html#a8c873c2a461e8a4cc5b22551f7f61e3e">More...</a><br /></td></tr>
<tr class="separator:a8c873c2a461e8a4cc5b22551f7f61e3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad45f5007d1822ea35f029770b4502b60"><td class="memItemLeft" align="right" valign="top">VoxelsOnCartesianGrid&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#ad45f5007d1822ea35f029770b4502b60">stir::zoom_image</a> (const VoxelsOnCartesianGrid&lt; float &gt; &amp;image, const CartesianCoordinate3D&lt; float &gt; &amp;zooms, const CartesianCoordinate3D&lt; float &gt; &amp;offsets_in_mm, const BasicCoordinate&lt; 3, int &gt; &amp;new_sizes, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:ad45f5007d1822ea35f029770b4502b60"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image</em>, returning the new image  <a href="namespacestir.html#ad45f5007d1822ea35f029770b4502b60">More...</a><br /></td></tr>
<tr class="separator:ad45f5007d1822ea35f029770b4502b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cfad9b06557034bf99b45a7d546da4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a4cfad9b06557034bf99b45a7d546da4a">stir::zoom_image_in_place</a> (VoxelsOnCartesianGrid&lt; float &gt; &amp;image, const CartesianCoordinate3D&lt; float &gt; &amp;zooms, const CartesianCoordinate3D&lt; float &gt; &amp;offsets_in_mm, const BasicCoordinate&lt; 3, int &gt; &amp;new_sizes, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:a4cfad9b06557034bf99b45a7d546da4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image</em>, replacing the first argument with the new data. Full 3D shifts and zooms.  <a href="namespacestir.html#a4cfad9b06557034bf99b45a7d546da4a">More...</a><br /></td></tr>
<tr class="separator:a4cfad9b06557034bf99b45a7d546da4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a49e86c3951bb9ef5caa384f905fea1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a1a49e86c3951bb9ef5caa384f905fea1">stir::zoom_image</a> (VoxelsOnCartesianGrid&lt; float &gt; &amp;image_out, const VoxelsOnCartesianGrid&lt; float &gt; &amp;image_in, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:a1a49e86c3951bb9ef5caa384f905fea1"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image_in</em> according to dimensions, origin and voxel_size of <em>image_out</em>.  <a href="namespacestir.html#a1a49e86c3951bb9ef5caa384f905fea1">More...</a><br /></td></tr>
<tr class="separator:a1a49e86c3951bb9ef5caa384f905fea1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83626cfc957b004ef1152bfdbedf945"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#ad83626cfc957b004ef1152bfdbedf945">stir::zoom_image</a> (PixelsOnCartesianGrid&lt; float &gt; &amp;image2D_out, const PixelsOnCartesianGrid&lt; float &gt; &amp;image2D_in, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:ad83626cfc957b004ef1152bfdbedf945"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image2D_in</em> according to dimensions, origin and pixel_size of <em>image2D_out</em>.  <a href="namespacestir.html#ad83626cfc957b004ef1152bfdbedf945">More...</a><br /></td></tr>
<tr class="separator:ad83626cfc957b004ef1152bfdbedf945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e5dea45344553f0cd3c8d75e6ecf9c"><td class="memItemLeft" align="right" valign="top">VoxelsOnCartesianGrid&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a29e5dea45344553f0cd3c8d75e6ecf9c">stir::zoom_image</a> (const VoxelsOnCartesianGrid&lt; float &gt; &amp;image, const float zoom, const float x_offset_in_mm, const float y_offset_in_mm, const int new_size, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:a29e5dea45344553f0cd3c8d75e6ecf9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image</em>, replacing the first argument with the new data  <a href="namespacestir.html#a29e5dea45344553f0cd3c8d75e6ecf9c">More...</a><br /></td></tr>
<tr class="separator:a29e5dea45344553f0cd3c8d75e6ecf9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743776fbf573c15ab7d21f27b9cab360"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacestir.html#a743776fbf573c15ab7d21f27b9cab360">stir::zoom_image_in_place</a> (VoxelsOnCartesianGrid&lt; float &gt; &amp;image, const float zoom, const float x_offset_in_mm, const float y_offset_in_mm, const int new_size, const ZoomOptions=ZoomOptions::preserve_sum)</td></tr>
<tr class="memdesc:a743776fbf573c15ab7d21f27b9cab360"><td class="mdescLeft">&#160;</td><td class="mdescRight">zoom <em>image</em>, replacing the first argument with the new data  <a href="namespacestir.html#a743776fbf573c15ab7d21f27b9cab360">More...</a><br /></td></tr>
<tr class="separator:a743776fbf573c15ab7d21f27b9cab360"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file declares various zooming functions. </p>
<dl class="section author"><dt>Author</dt><dd>Kris Thielemans </dd>
<dd>
Claire Labbe </dd>
<dd>
PARAPET project </dd>
<dd>
Ludovica Brusaferri</dd></dl>
<p>These functions can be used for zooming of projection data or image data. Zooming requires interpolation. Currently, this is done using <a class="el" href="group__numerics.html#gae67e702dedcca1a7d8427e1a0590797b" title="&#39;overlap&#39; interpolation (i.e. count preserving) for vectors. ">stir::overlap_interpolate</a>.</p>
<p>The first set of functions allows zooming and translation in transaxial planes only. These parameters are the same for projection data or image data. That is, zoomed projection data are (approximately) the forward projections of zoomed images with the same parameters. These functions have the following parameters:</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zoom</td><td>scales the projection bins (zoom larger than 1 means more detail, so smaller pixels) </td></tr>
    <tr><td class="paramname">x_offset_in_mm</td><td>x-coordinate of new origin (in mm) </td></tr>
    <tr><td class="paramname">y_offset_in_mm</td><td>y-coordinate of new origin (in mm)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Projection data</dt><dd></dd></dl>
<p>This allows 2-dimensional zooming and translation on arccorrected data, here translation means a translation in 'image' space which gives a <code>sin</code> shift of origin in the <code>s</code> - coordinate in projection space. The new range of <code>s</code> coordinates is given by </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min_tang_pos_num</td><td>[for projection data only] the minimum tangential position number in the new projection line </td></tr>
    <tr><td class="paramname">max_tang_pos_num</td><td>[for projection data only] the maximum tangential position number in the new projection line Note that the (projection of the) centre of the scanner axis is supposed to be at <em>tang_pos_num</em> = 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>images</dt><dd></dd></dl>
<p>It allows three-dimensional zooming and translation. Parameters are derived either from <a class="el" href="classstir_1_1CartesianCoordinate3D.html" title="a templated class for 3-dimensional coordinates. ">stir::CartesianCoordinate3D</a> objects, or from the information in the <em>in</em> and <em>out</em> images.</p>
<p>In the case that the offsets are 0, the following holds: </p><ul>
<li>
If <code>size</code> is equal to <code>zoom*old_size</code>, the same amount of data is represented. </li>
<li>
If it is less, data are truncated. </li>
<li>
If it is larger, the outer ends are filled with 0. </li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>Because overlap_interpolate is used, the zooming is 'count-preserving', i.e. when the output range is large enough, the <a class="el" href="group__buildblock.html#gaae6c0f5d36d3219fb266eca61f85c187" title="Compute the sum of a sequence using operator+=(), using an initial value. ">in.sum()</a> == <a class="el" href="group__buildblock.html#gaae6c0f5d36d3219fb266eca61f85c187" title="Compute the sum of a sequence using operator+=(), using an initial value. ">out.sum()</a>.</dd>
<dd>
In STIR 1.x, origins were taken relative to the centre of the coordinate range: <div class="fragment"><div class="line">x_in_mm = (x_index - x_ctr_index) * voxel_size.x() + origin.x()</div></div><!-- fragment --> where <div class="fragment"><div class="line">x_ctr_index = (x_max_index + x_min_index)/2</div></div><!-- fragment --> This is no longer true. Instead we use DiscretisedDensity&lt;3,float&gt;::get_physical_coordinates_for_indices. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 23 2024 09:13:13 for STIR by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
